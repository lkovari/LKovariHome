"use strict";(self.webpackChunkLKovariHome=self.webpackChunkLKovariHome||[]).push([[242],{1242:(CL,jm,j)=>{j.r(jm),j.d(jm,{DigitsModule:()=>xL});var W=j(4755),ka=j(2446),h=j(2223),Qn=j(387);let H=(()=>{var n;class e{}return(n=e).OPERATOR_REV="\xab",n.OPERATOR_ADD="+",n.OPERATOR_SUB="-",n.OPERATOR_MUL="\xd7",n.OPERATOR_DIV="/",e})();class Wm{constructor(e,t,r,i){this.id=e,this.selected=t,this.disabled=r,this.value=i}}class Km{constructor(){this.operands=[]}}class ln{static evaluate(e,t,r){var i=Number.MIN_VALUE;switch(r){case H.OPERATOR_ADD:i=e+t;break;case H.OPERATOR_SUB:i=e>=t?e-t:Number.MIN_VALUE;break;case H.OPERATOR_DIV:i=e%t==0?e/t:Number.MIN_VALUE;break;case H.OPERATOR_MUL:i=e*t}return i}static cloneGameParameters(e){let t=new Km;return t.result=e.result,e.operands.forEach(r=>{let i=new Wm(r.id,!1,!1,-1);Object.assign(i,r),t.operands.push(i)}),t}}class Yw{constructor(){this.numbers=[]}generateNumber(e,t){let r=Math.floor(e+Math.random()*(t-e+1));for(;this.numbers.indexOf(r)>=0;)r=Math.floor(e+Math.random()*(t-e+1));this.numbers.push(r)}getGeneratedNumbers(){return this.numbers}clearGeneratedNumbers(){this.numbers=[]}}class Wr{generateNumber(e,t){return Math.floor(e+Math.random()*(t-e+1))}choiceRandomOperation(){let e=this.generateNumber(0,4),t=H.OPERATOR_ADD;switch(e){case 0:t=H.OPERATOR_ADD;break;case 1:t=H.OPERATOR_SUB;break;case 2:t=H.OPERATOR_MUL;break;case 0:t=H.OPERATOR_DIV}return t}checkExecuteDivision(e,t){return e%t==0}checkExecuteSubstraction(e,t){return e>t}removeOperandByIndex(e,t){let r=t;return e<t&&(r=t-1),this.operands.splice(e,1),r}calculateResult(e){let t=this.operands.length,r=0,i=0,s=this.generateNumber(3,5),o=Number.MIN_VALUE;for(;i<s&&e.length>1;){let a=this.choiceRandomOperation(),c=this.generateNumber(0,t-1);for(o===Number.MIN_VALUE&&(o=this.generateNumber(0,t-1));o===c;)c=this.generateNumber(0,t-1);switch(a){case H.OPERATOR_ADD:e[o]=ln.evaluate(e[o],e[c],a),o=this.removeOperandByIndex(c,o),--t,++i;break;case H.OPERATOR_SUB:if(!this.checkExecuteSubstraction(e[o],e[c]))continue;e[o]=ln.evaluate(e[o],e[c],a),o=this.removeOperandByIndex(c,o),--t,++i;break;case H.OPERATOR_MUL:e[o]=ln.evaluate(e[o],e[c],a),o=this.removeOperandByIndex(c,o),--t,++i;break;case H.OPERATOR_DIV:if(!this.checkExecuteDivision(e[o],e[c]))continue;e[o]=ln.evaluate(e[o],e[c],a),o=this.removeOperandByIndex(c,o),--t,++i}}return r=e[o],r}generateGameParameter(e){let t=new Yw;switch(e){case 0:t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(5,10),t.generateNumber(10,25);break;case 1:t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(5,10),t.generateNumber(10,15),t.generateNumber(10,25);break;case 2:t.generateNumber(1,5),t.generateNumber(1,5),t.generateNumber(5,10),t.generateNumber(5,15),t.generateNumber(10,20),t.generateNumber(10,25);break;case 3:t.generateNumber(1,5),t.generateNumber(5,10),t.generateNumber(5,15),t.generateNumber(10,15),t.generateNumber(10,20),t.generateNumber(10,25);break;case 4:t.generateNumber(1,10),t.generateNumber(5,10),t.generateNumber(5,15),t.generateNumber(10,15),t.generateNumber(10,25),t.generateNumber(10,25)}let r=t.getGeneratedNumbers();r=r.sort((l,d)=>l-d);let i=new Array(r[0],r[1],r[2],r[3],r[4],r[5]);this.operands=new Array(r[0],r[1],r[2],r[3],r[4],r[5]),t.clearGeneratedNumbers();let s=0,o=0;switch(e){case 0:s=30,o=100;break;case 1:s=50,o=150;break;case 2:s=100,o=200;break;case 3:s=300,o=400;break;case 4:s=400,o=550}let a=this.calculateResult(this.operands);for(;s>a||a>o;)this.operands=new Array(r[0],r[1],r[2],r[3],r[4],r[5]),a=this.calculateResult(this.operands);let c=new Km;c.result=a;let u=0;return i.forEach(l=>{let d=new Wm(u,!1,!1,l);c.operands.push(d),++u}),c}generateStageNumbers(){let e=new Array;for(let t=0;t<5;t++){let r=this.generateGameParameter(t);r.stageIndex=t,e.push(r)}return e=e.sort((t,r)=>t.result-r.result),e}}class Hm{cookieData2Text(){return JSON.stringify(this)}text2CookieData(e){return JSON.parse(e)}}let Qm=(()=>{var n;class e{constructor(r,i){this.document=r,this.platformId=i,this.documentIsAccessible=(0,W.NF)(this.platformId)}static getCookieRegExp(r){const i=r.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(r){try{return decodeURIComponent(r)}catch{return r}}check(r){return!!this.documentIsAccessible&&(r=encodeURIComponent(r),e.getCookieRegExp(r).test(this.document.cookie))}get(r){if(this.documentIsAccessible&&this.check(r)){r=encodeURIComponent(r);const s=e.getCookieRegExp(r).exec(this.document.cookie);return s[1]?e.safeDecodeURIComponent(s[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const r={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(s=>{const[o,a]=s.split("=");r[e.safeDecodeURIComponent(o.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),r}set(r,i,s,o,a,c,u){if(!this.documentIsAccessible)return;if("number"==typeof s||s instanceof Date||o||a||c||u)return void this.set(r,i,{expires:s,path:o,domain:a,secure:c,sameSite:u||"Lax"});let l=encodeURIComponent(r)+"="+encodeURIComponent(i)+";";const d=s||{};d.expires&&(l+="number"==typeof d.expires?"expires="+new Date((new Date).getTime()+1e3*d.expires*60*60*24).toUTCString()+";":"expires="+d.expires.toUTCString()+";"),d.path&&(l+="path="+d.path+";"),d.domain&&(l+="domain="+d.domain+";"),!1===d.secure&&"None"===d.sameSite&&(d.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${r} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),d.secure&&(l+="secure;"),d.sameSite||(d.sameSite="Lax"),l+="sameSite="+d.sameSite+";",this.document.cookie=l}delete(r,i,s,o,a="Lax"){this.documentIsAccessible&&this.set(r,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:i,domain:s,secure:o,sameSite:a})}deleteAll(r,i,s,o="Lax"){if(!this.documentIsAccessible)return;const a=this.getAll();for(const c in a)a.hasOwnProperty(c)&&this.delete(c,r,i,s,o)}}return(n=e).\u0275fac=function(r){return new(r||n)(h.LFG(W.K0),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class Zw{constructor(){this.stages=[]}}class Jw{constructor(){this.operands=[]}}function Ym(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function p(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){Ym(s,r,i,o,a,"next",c)}function a(c){Ym(s,r,i,o,a,"throw",c)}o(void 0)})}}const Zm=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Oa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0;let f=(15&a)<<2|u>>6,m=63&u;c||(m=64,o||(f=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[f],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Zm(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==u||null==d)throw new n1;r.push(s<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class n1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yn=function(n){return function(n){const e=Zm(n);return Oa.encodeByteArray(e,!0)}(n).replace(/\./g,"")},_s=function(n){try{return Oa.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},ys=()=>{try{return function o1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_s(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},Xm=()=>{var n;return null===(n=ys())||void 0===n?void 0:n.config};class vs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pa(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function Ft(){try{return"object"==typeof indexedDB}catch{return!1}}function Zn(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function Ra(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class We extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nt.prototype.create)}}class nt{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function y1(n,e){return n.replace(v1,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new We(i,`${this.serviceName}: ${o} (${i}).`,r)}}const v1=/\{\$([^}]+)}/g;function Na(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(tg(s)&&tg(o)){if(!Na(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function tg(n){return null!==n&&"object"==typeof n}function ng(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class T1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function w1(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=Ma),void 0===i.error&&(i.error=Ma),void 0===i.complete&&(i.complete=Ma);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ma(){}const b1=1e3,E1=2,S1=144e5,x1=.5;function Fa(n,e=b1,t=E1){const r=e*Math.pow(t,n),i=Math.round(x1*r*(Math.random()-.5)*2);return Math.min(S1,r+i)}function Ut(n){return n&&n._delegate?n._delegate:n}class me{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const hn="[DEFAULT]";class C1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new vs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function D1(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return p(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=hn){return this.instances.has(e)}getOptions(e=hn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===hn?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=hn){return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new C1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ua=[];var P=(()=>((P=P||{})[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",P))();const rg={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},P1=P.INFO,R1={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},N1=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=R1[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class dn{constructor(e){this.name=e,this._logLevel=P1,this._logHandler=N1,this._userLogHandler=null,Ua.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in P))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?rg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...e),this._logHandler(this,P.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...e),this._logHandler(this,P.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,P.INFO,...e),this._logHandler(this,P.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,P.WARN,...e),this._logHandler(this,P.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...e),this._logHandler(this,P.ERROR,...e)}}const M1=(n,e)=>e.some(t=>n instanceof t);let ig,sg;const og=new WeakMap,Va=new WeakMap,ag=new WeakMap,Ga=new WeakMap,Ba=new WeakMap;let za={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Va.get(n);if("objectStoreNames"===e)return n.objectStoreNames||ag.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vt(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function z1(n){return"function"==typeof n?function B1(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function F1(){return sg||(sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply($a(this),e),Vt(og.get(this))}:function(...e){return Vt(n.apply($a(this),e))}:function(e,...t){const r=n.call($a(this),e,...t);return ag.set(r,e.sort?e.sort():[e]),Vt(r)}}(n):(n instanceof IDBTransaction&&function V1(n){if(Va.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Va.set(n,e)}(n),M1(n,function L1(){return ig||(ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,za):n)}function Vt(n){if(n instanceof IDBRequest)return function U1(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Vt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&og.set(t,n)}).catch(()=>{}),Ba.set(e,n),e}(n);if(Ga.has(n))return Ga.get(n);const e=z1(n);return e!==n&&(Ga.set(n,e),Ba.set(e,n)),e}const $a=n=>Ba.get(n);function cg(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Vt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Vt(o.result),c.oldVersion,c.newVersion,Vt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const $1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],qa=new Map;function ug(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(qa.get(e))return qa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=q1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$1.includes(t))return;const s=function(){var o=p(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return o.apply(this,arguments)}}();return qa.set(e,s),s}!function G1(n){za=n(za)}(n=>({...n,get:(e,t,r)=>ug(e,t)||n.get(e,t,r),has:(e,t)=>!!ug(e,t)||n.has(e,t)}));class j1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function W1(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ja="@firebase/app",fn=new dn("@firebase/app"),Ts="[DEFAULT]",yb={[ja]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,ws=new Map;function vb(n,e){try{n.container.addComponent(e)}catch(t){fn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jn(n){const e=n.name;if(ws.has(e))return fn.debug(`There were multiple attempts to register component ${e}.`),!1;ws.set(e,n);for(const t of pn.values())vb(t,n);return!0}const vt=new nt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tb{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new me("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}const bs="9.23.0";function dg(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Ts,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw vt.create("bad-app-name",{appName:String(i)});if(t||(t=Xm()),!t)throw vt.create("no-options");const s=pn.get(i);if(s){if(Na(t,s.options)&&Na(r,s.config))return s;throw vt.create("duplicate-app",{appName:i})}const o=new O1(i);for(const c of ws.values())o.addComponent(c);const a=new Tb(t,r,o);return pn.set(i,a),a}function Wa(n=Ts){const e=pn.get(n);if(!e&&n===Ts&&Xm())return dg();if(!e)throw vt.create("no-app",{appName:n});return e}function fg(){return Array.from(pn.values())}function Ze(n,e,t){var r;let i=null!==(r=yb[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void fn.warn(a.join(" "))}Jn(new me(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const wb="firebase-heartbeat-database",bb=1,Kr="firebase-heartbeat-store";let Ha=null;function pg(){return Ha||(Ha=cg(wb,bb,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Kr)}}).catch(n=>{throw vt.create("idb-open",{originalErrorMessage:n.message})})),Ha}function Qa(){return(Qa=p(function*(n){try{return yield(yield pg()).transaction(Kr).objectStore(Kr).get(gg(n))}catch(e){if(e instanceof We)fn.warn(e.message);else{const t=vt.create("idb-get",{originalErrorMessage:e?.message});fn.warn(t.message)}}})).apply(this,arguments)}function mg(n,e){return Ya.apply(this,arguments)}function Ya(){return(Ya=p(function*(n,e){try{const r=(yield pg()).transaction(Kr,"readwrite");yield r.objectStore(Kr).put(e,gg(n)),yield r.done}catch(t){if(t instanceof We)fn.warn(t.message);else{const r=vt.create("idb-set",{originalErrorMessage:t?.message});fn.warn(r.message)}}})).apply(this,arguments)}function gg(n){return`${n.name}!${n.options.appId}`}class Ab{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return p(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_g();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return p(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=_g(),{heartbeatsToSend:r,unsentEntries:i}=function Cb(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yg(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Yn(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function _g(){return(new Date).toISOString().substring(0,10)}class kb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(function*(){return!!Ft()&&Zn().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return p(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Eb(n){return Qa.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return p(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return mg(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return p(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return mg(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function yg(n){return Yn(JSON.stringify({version:2,heartbeats:n})).length}!function Db(n){Jn(new me("platform-logger",e=>new j1(e),"PRIVATE")),Jn(new me("heartbeat",e=>new Ab(e),"PRIVATE")),Ze(ja,"0.9.13",n),Ze(ja,"0.9.13","esm2017"),Ze("fire-js","")}(""),Ze("firebase","9.23.0","app");class Rb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Nb(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Za="@firebase/app",mn=new dn("@firebase/app"),oE={[Za]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gn=new Map,Ss=new Map;function aE(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Je(n){const e=n.name;if(Ss.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Ss.set(e,n);for(const t of gn.values())aE(t,n);return!0}function Ja(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const It=new nt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});function Xe(n,e,t){var r;let i=null!==(r=oE[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void mn.warn(a.join(" "))}Je(new me(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const dE="firebase-heartbeat-database",fE=1,Hr="firebase-heartbeat-store";let ec=null;function Ig(){return ec||(ec=cg(dE,fE,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Hr)}}).catch(n=>{throw It.create("idb-open",{originalErrorMessage:n.message})})),ec}function tc(){return(tc=p(function*(n){try{return yield(yield Ig()).transaction(Hr).objectStore(Hr).get(wg(n))}catch(e){if(e instanceof We)mn.warn(e.message);else{const t=It.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}})).apply(this,arguments)}function Tg(n,e){return nc.apply(this,arguments)}function nc(){return(nc=p(function*(n,e){try{const r=(yield Ig()).transaction(Hr,"readwrite");yield r.objectStore(Hr).put(e,wg(n)),yield r.done}catch(t){if(t instanceof We)mn.warn(t.message);else{const r=It.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}})).apply(this,arguments)}function wg(n){return`${n.name}!${n.options.appId}`}class _E{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return p(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bg();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return p(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=bg(),{heartbeatsToSend:r,unsentEntries:i}=function yE(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Eg(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Eg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Yn(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function bg(){return(new Date).toISOString().substring(0,10)}class vE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(function*(){return!!Ft()&&Zn().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return p(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function pE(n){return tc.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return p(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Tg(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return p(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Tg(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Eg(n){return Yn(JSON.stringify({version:2,heartbeats:n})).length}!function IE(n){Je(new me("platform-logger",e=>new Rb(e),"PRIVATE")),Je(new me("heartbeat",e=>new _E(e),"PRIVATE")),Xe(Za,"0.9.16",n),Xe(Za,"0.9.16","esm2017"),Xe("fire-js","")}("");const TE=(n,e)=>e.some(t=>n instanceof t);let Sg,xg;const Ag=new WeakMap,rc=new WeakMap,Cg=new WeakMap,ic=new WeakMap,sc=new WeakMap;let oc={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return rc.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Cg.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gt(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function CE(n){return"function"==typeof n?function AE(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bE(){return xg||(xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ac(this),e),Gt(Ag.get(this))}:function(...e){return Gt(n.apply(ac(this),e))}:function(e,...t){const r=n.call(ac(this),e,...t);return Cg.set(r,e.sort?e.sort():[e]),Gt(r)}}(n):(n instanceof IDBTransaction&&function SE(n){if(rc.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});rc.set(n,e)}(n),TE(n,function wE(){return Sg||(Sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,oc):n)}function Gt(n){if(n instanceof IDBRequest)return function EE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Gt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Ag.set(t,n)}).catch(()=>{}),sc.set(e,n),e}(n);if(ic.has(n))return ic.get(n);const e=CE(n);return e!==n&&(ic.set(n,e),sc.set(e,n)),e}const ac=n=>sc.get(n),DE=["get","getKey","getAll","getAllKeys","count"],OE=["put","add","delete","clear"],cc=new Map;function kg(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(cc.get(e))return cc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=OE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!DE.includes(t))return;const s=function(){var o=p(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return o.apply(this,arguments)}}();return cc.set(e,s),s}!function xE(n){oc=n(oc)}(n=>({...n,get:(e,t,r)=>kg(e,t)||n.get(e,t,r),has:(e,t)=>!!kg(e,t)||n.has(e,t)}));const Dg="@firebase/installations",uc="0.6.4",Og=1e4,Pg=`w:${uc}`,Rg="FIS_v2",PE="https://firebaseinstallations.googleapis.com/v1",RE=36e5,Tt=new nt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ng(n){return n instanceof We&&n.code.includes("request-failed")}function lc({projectId:n}){return`${PE}/projects/${n}/installations`}function Mg(n){return{token:n.token,requestStatus:2,expiresIn:FE(n.expiresIn),creationTime:Date.now()}}function hc(n,e){return dc.apply(this,arguments)}function dc(){return(dc=p(function*(n,e){const r=(yield e.json()).error;return Tt.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Lg({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function fc(n){return pc.apply(this,arguments)}function pc(){return(pc=p(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function FE(n){return Number(n.replace("s","000"))}function mc(){return(mc=p(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=lc(n),i=Lg(n),s=e.getImmediate({optional:!0});if(s){const u=yield s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Rg,appId:n.appId,sdkVersion:Pg})},c=yield fc(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Mg(u.authToken)}}throw yield hc("Create Installation",c)})).apply(this,arguments)}function Ug(n){return new Promise(e=>{setTimeout(e,n)})}const BE=/^[cdef][\w-]{21}$/,gc="";function zE(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function $E(n){return function GE(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return BE.test(t)?t:gc}catch{return gc}}function Xn(n){return`${n.appName}!${n.appId}`}const er=new Map;function Vg(n,e){const t=Xn(n);Gg(t,e),function WE(n,e){const t=function Bg(){return!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=n=>{Gg(n.data.key,n.data.fid)}),_n}();t&&t.postMessage({key:n,fid:e}),function zg(){0===er.size&&_n&&(_n.close(),_n=null)}()}(t,e)}function Gg(n,e){const t=er.get(n);if(t)for(const r of t)r(e)}let _n=null;const KE="firebase-installations-database",HE=1,yn="firebase-installations-store";let _c=null;function yc(){return _c||(_c=function kE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Gt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gt(o.result),c.oldVersion,c.newVersion,Gt(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(KE,HE,{upgrade:(n,e)=>{0===e&&n.createObjectStore(yn)}})),_c}function xs(n,e){return vc.apply(this,arguments)}function vc(){return(vc=p(function*(n,e){const t=Xn(n),i=(yield yc()).transaction(yn,"readwrite"),s=i.objectStore(yn),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&Vg(n,e.fid),e})).apply(this,arguments)}function Ic(n){return Tc.apply(this,arguments)}function Tc(){return(Tc=p(function*(n){const e=Xn(n),r=(yield yc()).transaction(yn,"readwrite");yield r.objectStore(yn).delete(e),yield r.done})).apply(this,arguments)}function Qr(n,e){return wc.apply(this,arguments)}function wc(){return(wc=p(function*(n,e){const t=Xn(n),i=(yield yc()).transaction(yn,"readwrite"),s=i.objectStore(yn),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&Vg(n,a.fid),a})).apply(this,arguments)}function bc(n){return Ec.apply(this,arguments)}function Ec(){return Ec=p(function*(n){let e;const t=yield Qr(n.appConfig,r=>{const i=function QE(n){return qg(n||{fid:zE(),registrationStatus:0})}(r),s=function YE(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Tt.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function ZE(n,e){return Sc.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:JE(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===gc?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Ec.apply(this,arguments)}function Sc(){return Sc=p(function*(n,e){try{const t=yield function VE(n,e){return mc.apply(this,arguments)}(n,e);return xs(n.appConfig,t)}catch(t){throw Ng(t)&&409===t.customData.serverCode?yield Ic(n.appConfig):yield xs(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Sc.apply(this,arguments)}function JE(n){return xc.apply(this,arguments)}function xc(){return(xc=p(function*(n){let e=yield $g(n.appConfig);for(;1===e.registrationStatus;)yield Ug(100),e=yield $g(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield bc(n);return r||t}return e})).apply(this,arguments)}function $g(n){return Qr(n,e=>{if(!e)throw Tt.create("installation-not-found");return qg(e)})}function qg(n){return function XE(n){return 1===n.registrationStatus&&n.registrationTime+Og<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Ac(){return(Ac=p(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function tS(n,{fid:e}){return`${lc(n)}/${e}/authTokens:generate`}(n,t),i=function Fg(n,{refreshToken:e}){const t=Lg(n);return t.append("Authorization",function UE(n){return`${Rg} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const u=yield s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Pg,appId:n.appId}})},c=yield fc(()=>fetch(r,a));if(c.ok)return Mg(yield c.json());throw yield hc("Generate Auth Token",c)})).apply(this,arguments)}function Cc(n){return kc.apply(this,arguments)}function kc(){return kc=p(function*(n,e=!1){let t;const r=yield Qr(n.appConfig,s=>{if(!Wg(s))throw Tt.create("not-registered");const o=s.authToken;if(!e&&function iS(n){return 2===n.requestStatus&&!function sS(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+RE}(n)}(o))return s;if(1===o.requestStatus)return t=function nS(n,e){return Dc.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw Tt.create("app-offline");const a=function oS(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function rS(n,e){return Oc.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),kc.apply(this,arguments)}function Dc(){return(Dc=p(function*(n,e){let t=yield jg(n.appConfig);for(;1===t.authToken.requestStatus;)yield Ug(100),t=yield jg(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Cc(n,e):r})).apply(this,arguments)}function jg(n){return Qr(n,e=>{if(!Wg(e))throw Tt.create("not-registered");return function aS(n){return 1===n.requestStatus&&n.requestTime+Og<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Oc(){return Oc=p(function*(n,e){try{const t=yield function eS(n,e){return Ac.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield xs(n.appConfig,r),t}catch(t){if(!Ng(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield xs(n.appConfig,r)}else yield Ic(n.appConfig);throw t}}),Oc.apply(this,arguments)}function Wg(n){return void 0!==n&&2===n.registrationStatus}function Pc(){return(Pc=p(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield bc(e);return r?r.catch(console.error):Cc(e).catch(console.error),t.fid})).apply(this,arguments)}function Rc(){return Rc=p(function*(n,e=!1){const t=n;return yield function lS(n){return Nc.apply(this,arguments)}(t),(yield Cc(t,e)).token}),Rc.apply(this,arguments)}function Nc(){return(Nc=p(function*(n){const{registrationPromise:e}=yield bc(n);e&&(yield e)})).apply(this,arguments)}function Fc(n){return Tt.create("missing-app-config-values",{valueName:n})}const Kg="installations",mS=n=>{const e=n.getProvider("app").getImmediate(),t=function fS(n){if(!n||!n.options)throw Fc("App Configuration");if(!n.name)throw Fc("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Fc(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Ja(e,"heartbeat"),_delete:()=>Promise.resolve()}},gS=n=>{const t=Ja(n.getProvider("app").getImmediate(),Kg).getImmediate();return{getId:()=>function cS(n){return Pc.apply(this,arguments)}(t),getToken:i=>function uS(n){return Rc.apply(this,arguments)}(t,i)}};(function _S(){Je(new me(Kg,mS,"PUBLIC")),Je(new me("installations-internal",gS,"PRIVATE"))})(),Xe(Dg,uc),Xe(Dg,uc,"esm2017");const Uc="@firebase/remote-config",Be=new nt("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class CS{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return p(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function kS(n=navigator){return n.languages&&n.languages[0]||n.language}class DS{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return p(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:kS()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(o,u),d=new Promise((O,N)=>{e.signal.addEventListener(()=>{const M=new Error("The operation was aborted.");M.name="AbortError",N(M)})});let f;try{yield Promise.race([l,d]),f=yield l}catch(O){let N="fetch-client-network";throw"AbortError"===O?.name&&(N="fetch-timeout"),Be.create(N,{originalErrorMessage:O?.message})}let m=f.status;const y=f.headers.get("ETag")||void 0;let T,w;if(200===f.status){let O;try{O=yield f.json()}catch(N){throw Be.create("fetch-client-parse",{originalErrorMessage:N?.message})}T=O.entries,w=O.state}if("INSTANCE_STATE_UNSPECIFIED"===w?m=500:"NO_CHANGE"===w?m=304:("NO_TEMPLATE"===w||"EMPTY_CONFIG"===w)&&(T={}),304!==m&&200!==m)throw Be.create("fetch-status",{httpStatus:m});return{status:m,eTag:y,config:T}})()}}class RS{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return p(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return p(function*(){yield function OS(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Be.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function PS(n){if(!(n instanceof We&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+Fa(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class LS{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Cs(n,e){const t=n.target.error||void 0;return Be.create(e,{originalErrorMessage:t&&t?.message})}const vn="app_namespace_store";class GS{constructor(e,t,r,i=function VS(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Cs(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(vn,{keyPath:"compositeKey"})}}catch(t){e(Be.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return p(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([vn],"readonly").objectStore(vn),c=t.createCompositeKey(e);try{const u=a.get(c);u.onerror=l=>{s(Cs(l,"storage-get"))},u.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(u){s(Be.create("storage-get",{originalErrorMessage:u?.message}))}})})()}set(e,t){var r=this;return p(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const c=i.transaction([vn],"readwrite").objectStore(vn),u=r.createCompositeKey(e);try{const l=c.put({compositeKey:u,value:t});l.onerror=d=>{o(Cs(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Be.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var t=this;return p(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([vn],"readwrite").objectStore(vn),c=t.createCompositeKey(e);try{const u=a.delete(c);u.onerror=l=>{s(Cs(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){s(Be.create("storage-delete",{originalErrorMessage:u?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class BS{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return p(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function $S(){return $c.apply(this,arguments)}function $c(){return($c=p(function*(){if(!Ft())return!1;try{return yield Zn()}catch{return!1}})).apply(this,arguments)}!function zS(){Je(new me("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Be.create("registration-window");if(!Ft())throw Be.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Be.create("registration-project-id");if(!o)throw Be.create("registration-api-key");if(!a)throw Be.create("registration-app-id");const c=new GS(a,r.name,t=t||"firebase"),u=new BS(c),l=new dn(Uc);l.logLevel=P.ERROR;const d=new DS(i,"10.2.0",t,s,o,a),f=new RS(d,c),m=new CS(f,c,u,l),y=new LS(r,m,u,c,l);return function SS(n){const e=Ut(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(y),y},"PUBLIC").setMultipleInstances(!0)),Xe(Uc,"0.4.4"),Xe(Uc,"0.4.4","esm2017")}();const qS=(n,e)=>e.some(t=>n instanceof t);let Zg,Jg;const Xg=new WeakMap,qc=new WeakMap,e_=new WeakMap,jc=new WeakMap,Wc=new WeakMap;let Kc={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return qc.get(n);if("objectStoreNames"===e)return n.objectStoreNames||e_.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wt(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ZS(n){return"function"==typeof n?function YS(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function WS(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Hc(this),e),wt(Xg.get(this))}:function(...e){return wt(n.apply(Hc(this),e))}:function(e,...t){const r=n.call(Hc(this),e,...t);return e_.set(r,e.sort?e.sort():[e]),wt(r)}}(n):(n instanceof IDBTransaction&&function HS(n){if(qc.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});qc.set(n,e)}(n),qS(n,function jS(){return Zg||(Zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Kc):n)}function wt(n){if(n instanceof IDBRequest)return function KS(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(wt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Xg.set(t,n)}).catch(()=>{}),Wc.set(e,n),e}(n);if(jc.has(n))return jc.get(n);const e=ZS(n);return e!==n&&(jc.set(n,e),Wc.set(e,n)),e}const Hc=n=>Wc.get(n);function t_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=wt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(wt(o.result),c.oldVersion,c.newVersion,wt(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function Qc(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),wt(t).then(()=>{})}const JS=["get","getKey","getAll","getAllKeys","count"],XS=["put","add","delete","clear"],Yc=new Map;function n_(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Yc.get(e))return Yc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=XS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!JS.includes(t))return;const s=function(){var o=p(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return o.apply(this,arguments)}}();return Yc.set(e,s),s}!function QS(n){Kc=n(Kc)}(n=>({...n,get:(e,t,r)=>n_(e,t)||n.get(e,t,r),has:(e,t)=>!!n_(e,t)||n.has(e,t)}));const ex="/firebase-messaging-sw.js",tx="/firebase-cloud-messaging-push-scope",r_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nx="https://fcmregistrations.googleapis.com/v1",i_="google.c.a.c_id",rx="google.c.a.c_l",ix="google.c.a.ts";var Bt=(()=>((Bt=Bt||{}).PUSH_RECEIVED="push-received",Bt.NOTIFICATION_CLICKED="notification-clicked",Bt))();function bt(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ox(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const Zc="fcm_token_details_db",ax=5,s_="fcm_token_object_Store";function Jc(){return Jc=p(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Zc))return null;let e=null;return(yield t_(Zc,ax,{upgrade:(r=p(function*(i,s,o,a){var c;if(s<2||!i.objectStoreNames.contains(s_))return;const u=a.objectStore(s_),l=yield u.index("fcmSenderId").get(n);if(yield u.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:bt(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:bt(d.auth),p256dh:bt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:bt(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:bt(d.auth),p256dh:bt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:bt(d.vapidKey)}}}}),function(s,o,a,c){return r.apply(this,arguments)})})).close(),yield Qc(Zc),yield Qc("fcm_vapid_details_db"),yield Qc("undefined"),function ux(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Jc.apply(this,arguments)}const lx="firebase-messaging-database",hx=1,In="firebase-messaging-store";let Xc=null;function eu(){return Xc||(Xc=t_(lx,hx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(In)}})),Xc}function o_(n){return tu.apply(this,arguments)}function tu(){return tu=p(function*(n){const e=su(n),r=yield(yield eu()).transaction(In).objectStore(In).get(e);if(r)return r;{const i=yield function cx(n){return Jc.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield nu(n,i),i}}),tu.apply(this,arguments)}function nu(n,e){return ru.apply(this,arguments)}function ru(){return(ru=p(function*(n,e){const t=su(n),i=(yield eu()).transaction(In,"readwrite");return yield i.objectStore(In).put(e,t),yield i.done,e})).apply(this,arguments)}function iu(){return(iu=p(function*(n){const e=su(n),r=(yield eu()).transaction(In,"readwrite");yield r.objectStore(In).delete(e),yield r.done})).apply(this,arguments)}function su({appConfig:n}){return n.appId}const Se=new nt("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function px(n,e){return ou.apply(this,arguments)}function ou(){return(ou=p(function*(n,e){const t=yield lu(n),r=c_(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(uu(n.appConfig),i)).json()}catch(o){throw Se.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Se.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Se.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function au(){return(au=p(function*(n,e){const t=yield lu(n),r=c_(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${uu(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Se.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Se.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Se.create("token-update-no-token");return s.token})).apply(this,arguments)}function a_(n,e){return cu.apply(this,arguments)}function cu(){return(cu=p(function*(n,e){const r={method:"DELETE",headers:yield lu(n)};try{const s=yield(yield fetch(`${uu(n.appConfig)}/${e}`,r)).json();if(s.error)throw Se.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Se.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function uu({projectId:n}){return`${nx}/projects/${n}/registrations`}function lu(n){return hu.apply(this,arguments)}function hu(){return(hu=p(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function c_({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==r_&&(i.web.applicationPubKey=r),i}const gx=6048e5;function du(){return du=p(function*(n){const e=yield function vx(n,e){return gu.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:bt(e.getKey("auth")),p256dh:bt(e.getKey("p256dh"))},r=yield o_(n.firebaseDependencies);if(r){if(function Ix(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+gx?function yx(n,e){return pu.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield a_(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return l_(n.firebaseDependencies,t)}return l_(n.firebaseDependencies,t)}),du.apply(this,arguments)}function fu(){return fu=p(function*(n){const e=yield o_(n.firebaseDependencies);e&&(yield a_(n.firebaseDependencies,e.token),yield function dx(n){return iu.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),fu.apply(this,arguments)}function pu(){return pu=p(function*(n,e){try{const t=yield function mx(n,e){return au.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield nu(n.firebaseDependencies,r),t}catch(t){throw yield function u_(n){return fu.apply(this,arguments)}(n),t}}),pu.apply(this,arguments)}function l_(n,e){return mu.apply(this,arguments)}function mu(){return(mu=p(function*(n,e){const r={token:yield px(n,e),createTime:Date.now(),subscriptionOptions:e};return yield nu(n,r),r.token})).apply(this,arguments)}function gu(){return(gu=p(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ox(e)})})).apply(this,arguments)}function h_(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Tx(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function wx(n,e){e.data&&(n.data=e.data)}(e,n),function bx(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function d_(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function _u(n){return Se.create("missing-app-config-values",{valueName:n})}d_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),d_("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xx{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Sx(n){if(!n||!n.options)throw _u("App Configuration Object");if(!n.name)throw _u("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw _u(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function yu(){return(yu=p(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(ex,{scope:tx}),n.swRegistration.update().catch(()=>{})}catch(e){throw Se.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function vu(){return(vu=p(function*(n,e){if(!e&&!n.swRegistration&&(yield function f_(n){return yu.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Se.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function Iu(){return(Iu=p(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=r_)})).apply(this,arguments)}function Tu(){return Tu=p(function*(n,e){if(!navigator)throw Se.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Se.create("permission-blocked");return yield function Cx(n,e){return Iu.apply(this,arguments)}(n,e?.vapidKey),yield function Ax(n,e){return vu.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function _x(n){return du.apply(this,arguments)}(n)}),Tu.apply(this,arguments)}function wu(){return(wu=p(function*(n,e,t){const r=function Dx(n){switch(n){case Bt.NOTIFICATION_CLICKED:return"notification_open";case Bt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[i_],message_name:t[rx],message_time:t[ix],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bu(){return bu=p(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Bt.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(h_(t)):n.onMessageHandler.next(h_(t)));const r=t.data;(function Ex(n){return"object"==typeof n&&!!n&&i_ in n})(r)&&"1"===r["google.c.a.e"]&&(yield function kx(n,e,t){return wu.apply(this,arguments)}(n,t.messageType,r))}),bu.apply(this,arguments)}const m_="@firebase/messaging",Px=n=>{const e=new xx(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Ox(n,e){return bu.apply(this,arguments)}(e,t)),e},Rx=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function p_(n,e){return Tu.apply(this,arguments)}(e,r)}};function __(){return Eu.apply(this,arguments)}function Eu(){return(Eu=p(function*(){try{yield Zn()}catch{return!1}return typeof window<"u"&&Ft()&&Ra()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nx(){Je(new me("messaging",Px,"PUBLIC")),Je(new me("messaging-internal",Rx,"PRIVATE")),Xe(m_,"0.12.4"),Xe(m_,"0.12.4","esm2017")}();const ks="analytics",Fx="firebase_id",Ux="origin",Vx=6e4,Gx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Au="https://www.googletagmanager.com/gtag/js",ye=new dn("@firebase/analytics"),Ue=new nt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function zx(n){if(!n.startsWith(Au)){const e=Ue.create("invalid-gtag-resource",{gtagURL:n});return ye.warn(e.message),""}return n}function y_(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Cu(){return(Cu=p(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const c=(yield y_(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){ye.error(a)}n("config",i,s)})).apply(this,arguments)}function ku(){return(ku=p(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield y_(t);for(const c of o){const u=a.find(d=>d.measurementId===c),l=u&&e[u.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){ye.error(s)}})).apply(this,arguments)}const Zx=30,v_=new class Xx{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function eA(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Du(){return(Du=p(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:eA(r)},s=Gx.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const c=yield o.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw Ue.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Ou(){return(Ou=p(function*(n,e=v_,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Ue.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ue.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sA;return setTimeout(p(function*(){a.abort()}),void 0!==t?t:Vx),I_({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function I_(n,e,t){return Pu.apply(this,arguments)}function Pu(){return Pu=p(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=v_){var s;const{appId:o,measurementId:a}=n;try{yield function rA(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Ue.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw c}try{const c=yield function tA(n){return Du.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!function iA(n){if(!(n instanceof We&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(o),a)return ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw c}const l=503===Number(null===(s=u?.customData)||void 0===s?void 0:s.httpStatus)?Fa(t,i.intervalMillis,Zx):Fa(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(o,d),ye.debug(`Calling attemptFetch again in ${l} millis`),I_(n,d,r,i)}}),Pu.apply(this,arguments)}class sA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ru,Gu;function Nu(){return(Nu=p(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function Bu(){return(Bu=p(function*(){if(!Ft())return ye.warn(Ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Zn()}catch(n){return ye.warn(Ue.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function zu(){return zu=p(function*(n,e,t,r,i,s,o){var a;const c=function nA(n){return Ou.apply(this,arguments)}(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&ye.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ye.error(m)),e.push(c);const u=function dA(){return Bu.apply(this,arguments)}().then(m=>{if(m)return r.getId()}),[l,d]=yield Promise.all([c,u]);(function Yx(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Au)&&t.src.includes(n))return t;return null})(s)||function qx(n,e){const t=function $x(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:zx}),r=document.createElement("script"),i=`${Au}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),Gu&&(i("consent","default",Gu),function T_(n){Gu=n}(void 0)),i("js",new Date);const f=null!==(a=o?.config)&&void 0!==a?a:{};return f[Ux]="firebase",f.update=!0,null!=d&&(f[Fx]=d),i("config",l.measurementId,f),Ru&&(i("set",Ru),function w_(n){Ru=n}(void 0)),l.measurementId}),zu.apply(this,arguments)}class pA{constructor(e){this.app=e}_delete(){return delete at[this.app.options.appId],Promise.resolve()}}let at={},b_=[];const E_={};let x_,ct,Ds="dataLayer",$u=!1;function gA(n,e,t){!function mA(){const n=[];if(Pa()&&n.push("This is a browser extension environment."),Ra()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ue.create("invalid-analytics-context",{errorInfo:e});ye.warn(t.message)}}();const r=n.options.appId;if(!r)throw Ue.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ue.create("no-api-key");ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=at[r])throw Ue.create("already-exists",{id:r});if(!$u){!function jx(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Ds);const{wrappedGtag:s,gtagCore:o}=function Qx(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Hx(n,e,t,r){function s(){return s=p(function*(o,...a){try{if("event"===o){const[c,u]=a;yield function Kx(n,e,t,r,i){return ku.apply(this,arguments)}(n,e,t,c,u)}else if("config"===o){const[c,u]=a;yield function Wx(n,e,t,r,i,s){return Cu.apply(this,arguments)}(n,e,t,r,c,u)}else if("consent"===o){const[c]=a;n("consent","update",c)}else if("get"===o){const[c,u,l]=a;n("get",c,u,l)}else if("set"===o){const[c]=a;n("set",c)}else n(o,...a)}catch(c){ye.error(c)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(at,b_,E_,Ds,"gtag");ct=s,x_=o,$u=!0}return at[r]=function fA(n,e,t,r,i,s,o){return zu.apply(this,arguments)}(n,b_,E_,e,x_,Ds,t),new pA(n)}function yA(){return qu.apply(this,arguments)}function qu(){return(qu=p(function*(){if(Pa()||!Ra()||!Ft())return!1;try{return yield Zn()}catch{return!1}})).apply(this,arguments)}const A_="@firebase/analytics";!function IA(){Je(new me(ks,(e,{options:t})=>gA(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Je(new me("analytics-internal",function n(e){try{const t=e.getProvider(ks).getImmediate();return{logEvent:(r,i,s)=>function vA(n,e,t,r){n=Ut(n),function oA(n,e,t,r,i){return Nu.apply(this,arguments)}(ct,at[n.app.options.appId],e,t,r).catch(i=>ye.error(i))}(t,r,i,s)}}catch(t){throw Ue.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Xe(A_,"0.10.0"),Xe(A_,"0.10.0","esm2017")}();var TA=j(4408),bA=j(640);const SA=new class EA extends bA.v{}(class wA extends TA.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var xA=j(4986),Wu=j(9751),AA=j(8505),k_=j(9468),D_=j(5363);const Ku=new h.GfV("7.6.1"),Hu="__angularfire_symbol__analyticsIsSupportedValue",Qu="__angularfire_symbol__analyticsIsSupported",Yu="__angularfire_symbol__remoteConfigIsSupportedValue",Zu="__angularfire_symbol__remoteConfigIsSupported",Ju="__angularfire_symbol__messagingIsSupportedValue",Xu="__angularfire_symbol__messagingIsSupported";globalThis[Qu]||(globalThis[Qu]=yA().then(n=>globalThis[Hu]=n).catch(()=>globalThis[Hu]=!1)),globalThis[Xu]||(globalThis[Xu]=__().then(n=>globalThis[Ju]=n).catch(()=>globalThis[Ju]=!1)),globalThis[Zu]||(globalThis[Zu]=$S().then(n=>globalThis[Yu]=n).catch(()=>globalThis[Yu]=!1));const nl=(n,e)=>{const t=e?[e]:fg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function tr(){}class O_{constructor(e,t=SA){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class CA{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tr,{},tr,tr)),t.pipe((0,AA.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let P_=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new O_(Zone.current)),this.insideAngular=t.run(()=>new O_(Zone.current,xA.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tn(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function wn(n){return Tn().ngZone.run(()=>n())}function DA(n){return Tn(),function OA(n){return function(t){return(t=t.lift(new CA(n.ngZone))).pipe((0,k_.R)(n.outsideAngular),(0,D_.Q)(n.insideAngular))}}(Tn())(n)}const PA=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),wn(()=>n.apply(void 0,r))},Yr=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=wn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tr,{},tr,tr)))),r[s]=PA(r[s],t));const i=function kA(n){return Tn().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Wu.y){const s=Tn();return i.pipe((0,k_.R)(s.outsideAngular),(0,D_.Q)(s.insideAngular))}return wn(()=>i)}return i instanceof Wu.y?i.pipe(DA):i instanceof Promise?wn(()=>new Promise((s,o)=>i.then(a=>wn(()=>s(a)),a=>wn(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:wn(()=>i)};class nr{constructor(e){return e}}class R_{constructor(){return fg()}}const rl=new h.OlP("angularfire2._apps"),NA={provide:nr,useFactory:function RA(n){return n&&1===n.length?n[0]:new nr(Wa())},deps:[[new h.FiY,rl]]},MA={provide:R_,deps:[[new h.FiY,rl]]};function LA(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nr(r)}}let FA=(()=>{class n{constructor(t){Ze("angularfire",Ku.full,"core"),Ze("angularfire",Ku.full,"app"),Ze("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[NA,MA]}),n})();function UA(n,...e){return{ngModule:FA,providers:[{provide:rl,useFactory:LA(n),multi:!0,deps:[h.R0b,h.zs3,P_,...e]}]}}const VA=Yr(Wa,!0),GA=Yr(dg,!0);function M_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}const $A=function U_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},V_=new nt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ps=new dn("@firebase/auth");function Rs(n,...e){Ps.logLevel<=P.ERROR&&Ps.error(`Auth (${bs}): ${n}`,...e)}function ze(n,...e){throw sl(n,...e)}function ut(n,...e){return sl(n,...e)}function sl(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return V_.create(n,...e)}function b(n,e,...t){if(!n)throw sl(e,...t)}function lt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rs(e),new Error(e)}function zt(n,e){n||lt(e)}function B_(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Jr{constructor(e,t){this.shortDelay=e,this.longDelay=t,zt(t>e,"Short delay should be less than long delay!"),this.isMobile=function p1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}()||function g1(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function jA(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ol(){return"http:"===B_()||"https:"===B_()}()||Pa()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class z_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},HA=new Jr(3e4,6e4);function re(n,e,t,r){return cl.apply(this,arguments)}function cl(){return(cl=p(function*(n,e,t,r,i={}){return $_(n,i,p(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=ng(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),z_.fetch()(q_(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function $_(n,e,t){return ul.apply(this,arguments)}function ul(){return(ul=p(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},KA),e);try{const i=new QA(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Xr(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Xr(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw Xr(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw Xr(n,"user-disabled",o);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw function G_(n,e,t){const r=Object.assign(Object.assign({},$A()),{[e]:t});return new nt("auth","Firebase",r).create(e,{appName:n.name})}(n,l,u);ze(n,l)}}catch(i){if(i instanceof We)throw i;ze(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function q_(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function al(n,e){zt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class QA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ut(this.auth,"network-request-failed")),HA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xr(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ut(n,e,r);return i.customData._tokenResponse=t,i}function hl(){return(hl=p(function*(n,e){return re(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function fl(){return(fl=p(function*(n,e){return re(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ei(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function pl(){return(pl=p(function*(n,e=!1){const t=Ut(n),r=yield t.getIdToken(e),i=Ns(r);b(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ei(ml(i.auth_time)),issuedAtTime:ei(ml(i.iat)),expirationTime:ei(ml(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function ml(n){return 1e3*Number(n)}function Ns(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Rs("JWT malformed, contained fewer than 3 sections"),null;try{const i=_s(t);return i?JSON.parse(i):(Rs("Failed to decode base64 JWT payload"),null)}catch(i){return Rs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function St(n,e){return gl.apply(this,arguments)}function gl(){return(gl=p(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof We&&function tC({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class nC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(p(function*(){yield t.iteration()}),r)}iteration(){var e=this;return p(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class j_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ti(n){return _l.apply(this,arguments)}function _l(){return _l=p(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield St(n,function JA(n,e){return fl.apply(this,arguments)}(t,{idToken:r}));b(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function sC(n){return n.map(e=>{var{providerId:t}=e,r=M_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function iC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),l=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new j_(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,d)}),_l.apply(this,arguments)}function yl(){return(yl=p(function*(n){const e=Ut(n);yield ti(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function vl(){return(vl=p(function*(n,e){const t=yield $_(n,{},p(function*(){const r=ng({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=q_(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",z_.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(typeof e.idToken<"u","internal-error"),b(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function eC(n){const e=Ns(n);return b(e,"internal-error"),b(typeof e.exp<"u","internal-error"),b(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return p(function*(){return b(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return p(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function oC(n,e){return vl.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ni;return r&&(b("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(b("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(b("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ni,this.toJSON())}_performRefresh(){return lt("not implemented")}}function $t(n,e){b("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class bn{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=M_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new j_(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return p(function*(){const r=yield St(t,t.stsTokenManager.getToken(t.auth,e));return b(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function XA(n){return pl.apply(this,arguments)}(this,e)}reload(){return function rC(n){return yl.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return p(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ti(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return p(function*(){const t=yield e.getIdToken();return yield St(e,function YA(n,e){return hl.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,l;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,f=null!==(i=t.email)&&void 0!==i?i:void 0,m=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,y=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,w=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,O=null!==(u=t.createdAt)&&void 0!==u?u:void 0,N=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:M,emailVerified:ae,isAnonymous:ne,providerData:q,stsTokenManager:Pe}=t;b(M&&Pe,e,"internal-error");const Lt=ni.fromJSON(this.name,Pe);b("string"==typeof M,e,"internal-error"),$t(d,e.name),$t(f,e.name),b("boolean"==typeof ae,e,"internal-error"),b("boolean"==typeof ne,e,"internal-error"),$t(m,e.name),$t(y,e.name),$t(T,e.name),$t(w,e.name),$t(O,e.name),$t(N,e.name);const jr=new bn({uid:M,auth:e,email:f,emailVerified:ae,displayName:d,isAnonymous:ne,photoURL:y,phoneNumber:m,tenantId:T,stsTokenManager:Lt,createdAt:O,lastLoginAt:N});return q&&Array.isArray(q)&&(jr.providerData=q.map(AL=>Object.assign({},AL))),w&&(jr._redirectEventId=w),jr}static _fromIdTokenResponse(e,t,r=!1){return p(function*(){const i=new ni;i.updateFromServerResponse(t);const s=new bn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ti(s),s})()}}const W_=new Map;function xt(n){zt(n instanceof Function,"Expected a class definition");let e=W_.get(n);return e?(zt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W_.set(n,e),e)}const K_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(function*(){return!0})()}_set(t,r){var i=this;return p(function*(){i.storage[t]=r})()}_get(t){var r=this;return p(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return p(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Ms(n,e,t){return`firebase:${n}:${e}:${t}`}class ir{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ms(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ms("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return p(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?bn._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return p(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(function*(){if(!t.length)return new ir(xt(K_),e,r);const i=(yield Promise.all(t.map(function(){var u=p(function*(l){if(yield l._isAvailable())return l});return function(l){return u.apply(this,arguments)}}()))).filter(u=>u);let s=i[0]||xt(K_);const o=Ms(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const l=yield u._get(o);if(l){const d=bn._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var u=p(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return u.apply(this,arguments)}}())),new ir(s,e,r)):new ir(s,e,r)})()}}function H_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function Z_(n=je()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function Q_(n=je()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function X_(n=je()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function ey(n=je()){return/webos/i.test(n)}(e))return"Webos";if(function Il(n=je()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function Y_(n=je()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function J_(n=je()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function ty(n,e=[]){let t;switch(n){case"Browser":t=H_(je());break;case"Worker":t=`${H_(je())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bs}/${r}`}function ny(n,e){return wl.apply(this,arguments)}function wl(){return(wl=p(function*(n,e){return re(n,"GET","/v2/recaptchaConfig",function ee(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}(n,e))})).apply(this,arguments)}function iy(n){return void 0!==n&&void 0!==n.enterprise}class sy{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}class ay{constructor(e){this.type="recaptcha-enterprise",this.auth=ve(e)}verify(e="verify",t=!1){var r=this;return p(function*(){function s(){return s=p(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=p(function*(u,l){ny(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const f=new sy(d);return null==a.tenantId?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,u(f.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(u,l){return c.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,c,u){const l=window.grecaptcha;iy(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(u=>{if(!t&&iy(window.grecaptcha))o(u,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));(function bl(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ut("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function lC(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+u).then(()=>{o(u,a,c)}).catch(l=>{c(l)})}}).catch(u=>{c(u)})})})()}}class pC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return p(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class mC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new pC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=xt(t)),this._initializationPromise=this.queue(p(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield ir.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return p(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return p(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,u=yield t.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(s=u.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return b(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return p(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return p(function*(){try{yield ti(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function WA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return p(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return p(function*(){const r=e?Ut(e):null;return r&&b(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return p(function*(){if(!r._deleted)return e&&b(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(p(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return p(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(p(function*(){yield t.assertedPersistence.setPersistence(xt(e))}))}initializeRecaptchaConfig(){var e=this;return p(function*(){const t=yield ny(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new sy(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new ay(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return p(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return p(function*(){if(!t.redirectPersistenceManager){const r=e&&xt(e)||t._popupRedirectResolver;b(r,t,"argument-error"),t.redirectPersistenceManager=yield ir.create(t,[xt(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return p(function*(){var r,i;return t._isInitialized&&(yield t.queue(p(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return p(function*(){if(e===t.currentUser)return t.queue(p(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return b(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return p(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ty(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return p(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return p(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function qA(n,...e){Ps.logLevel<=P.WARN&&Ps.warn(`Auth (${bs}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ve(n){return Ut(n)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=function I1(n,e){const t=new T1(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function oy(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new Jr(3e4,6e4),new Jr(2e3,1e4),new Jr(3e4,6e4),new Jr(5e3,15e3),encodeURIComponent("fac");var Fy="@firebase/auth";class aD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return p(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}ys(),function uD(n){Jn(new me("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;b(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ty(n)},u=new mC(r,i,s,c);return function _C(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new me("auth-internal",e=>{const t=ve(e.getProvider("auth").getImmediate());return new aD(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(Fy,"0.23.2",function cD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Ze(Fy,"0.23.2","esm2017")}("Browser");class By{constructor(){return nl("auth")}}const hd=new Map,zy={activated:!1,tokenObservers:[]},gD={initialized:!1,enabled:!1};function ie(n){return hd.get(n)||Object.assign({},zy)}function Hs(){return gD}const dd="https://content-firebaseappcheck.googleapis.com/v1",ID="exchangeDebugToken",$y={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class wD{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return p(function*(){t.stop();try{t.pending=new vs,yield function bD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new vs,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xe=new nt("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fd(n){if(!ie(n).activated)throw xe.create("use-before-activation",{appName:n.name})}function Zs(n,e){return md.apply(this,arguments)}function md(){return md=p(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw xe.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw xe.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw xe.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw xe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}}),md.apply(this,arguments)}function qy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dd}/projects/${t}/apps/${r}:${ID}?key=${i}`,body:{debug_token:e}}}const AD="firebase-app-check-database",CD=1,ai="firebase-app-check-store";let Js=null;function gd(){return gd=p(function*(n,e){const r=(yield function Wy(){return Js||(Js=new Promise((n,e)=>{try{const t=indexedDB.open(AD,CD);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xe.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ai,{keyPath:"compositeKey"})}}catch(t){e(xe.create("storage-open",{originalErrorMessage:t?.message}))}}),Js)}()).transaction(ai,"readwrite"),s=r.objectStore(ai).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(xe.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})}),gd.apply(this,arguments)}const ci=new dn("@firebase/app-check");function vd(n,e){return Ft()?function DD(n,e){return function Ky(n,e){return gd.apply(this,arguments)}(function Qy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ci.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Td(){return Hs().enabled}function wd(){return bd.apply(this,arguments)}function bd(){return bd=p(function*(){const n=Hs();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),bd.apply(this,arguments)}const LD={error:"UNKNOWN_ERROR"};function FD(n){return Oa.encodeString(JSON.stringify(n),!1)}function Xs(n){return Ed.apply(this,arguments)}function Ed(){return Ed=p(function*(n,e=!1){const t=n.app;fd(t);const r=ie(t);let s,i=r.token;if(i&&!or(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(or(c)?i=c:yield vd(t,void 0))}if(!e&&i&&or(i))return{token:i.token};let a,o=!1;if(Td()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zs(qy(t,yield wd()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const c=yield r.exchangeTokenPromise;return yield vd(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield ie(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?ci.warn(c.message):ci.error(c),s=c}return i?s?a=or(i)?{token:i.token,internalError:s}:Xy(s):(a={token:i.token},r.token=i,yield vd(t,i)):a=Xy(s),o&&function Jy(n,e){const t=ie(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,a),a}),Ed.apply(this,arguments)}function Sd(){return Sd=p(function*(n){const e=n.app;fd(e);const{provider:t}=ie(e);if(Td()){const r=yield wd(),{token:i}=yield Zs(qy(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),Sd.apply(this,arguments)}function Ad(n,e){const t=ie(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Zy(n){const{app:e}=n,t=ie(e);let r=t.tokenRefresher;r||(r=function UD(n){const{app:e}=n;return new wD(p(function*(){let r;if(r=ie(e).token?yield Xs(n,!0):yield Xs(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ie(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},$y.RETRIAL_MIN_WAIT,$y.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function or(n){return n.expireTimeMillis-Date.now()>0}function Xy(n){return{token:FD(LD),error:n}}class VD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ie(this.app);for(const t of e)Ad(this.app,t.next);return Promise.resolve()}}const av="app-check-internal";!function XD(){Je(new me("app-check",n=>function GD(n,e){return new VD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(av).initialize()})),Je(new me(av,n=>function BD(n){return{getToken:e=>Xs(n,e),getLimitedUseToken:()=>function Yy(n){return Sd.apply(this,arguments)}(n),addTokenListener:e=>function xd(n,e,t,r){const{app:i}=n,s=ie(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&or(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),Zy(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Zy(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ad(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Xe("@firebase/app-check","0.8.0")}();class uv{constructor(){return nl("app-check")}}typeof window<"u"&&window;var x,iO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rt={},Pd=Pd||{},L=iO||self;function to(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ui(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rd="closure_uid_"+(1e9*Math.random()>>>0),oO=0;function aO(n,e,t){return n.call.apply(n.bind,arguments)}function cO(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Re(n,e,t){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aO:cO).apply(null,arguments)}function no(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ie(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function jt(){this.s=this.s,this.o=this.o}jt.prototype.s=!1,jt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sO(n){Object.prototype.hasOwnProperty.call(n,Rd)&&n[Rd]||(n[Rd]=++oO)}(this)},jt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Nd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(to(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Ne(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var lO=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{L.addEventListener("test",()=>{},e),L.removeEventListener("test",()=>{},e)}catch{}return n}();function li(n){return/^[\s\xa0]*$/.test(n)}function ro(){var n=L.navigator;return n&&(n=n.userAgent)?n:""}function ht(n){return-1!=ro().indexOf(n)}function Md(n){return Md[" "](n),n}Md[" "]=function(){};var Fd,dO=ht("Opera"),ar=ht("Trident")||ht("MSIE"),dv=ht("Edge"),Ld=dv||ar,fv=ht("Gecko")&&!(-1!=ro().toLowerCase().indexOf("webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),fO=-1!=ro().toLowerCase().indexOf("webkit")&&!ht("Edge");function pv(){var n=L.document;return n?n.documentMode:void 0}e:{var Ud="",Vd=function(){var n=ro();return fv?/rv:([^\);]+)(\)|;)/.exec(n):dv?/Edge\/([\d\.]+)/.exec(n):ar?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fO?/WebKit\/(\S+)/.exec(n):dO?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Vd&&(Ud=Vd?Vd[1]:""),ar){var Gd=pv();if(null!=Gd&&Gd>parseFloat(Ud)){Fd=String(Gd);break e}}Fd=Ud}var pO=L.document&&ar&&(pv()||parseInt(Fd,10))||void 0;function hi(n,e){if(Ne.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fv){e:{try{Md(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mO[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hi.$.h.call(this)}}Ie(hi,Ne);var mO={2:"touch",3:"pen",4:"mouse"};hi.prototype.h=function(){hi.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var di="closure_listenable_"+(1e6*Math.random()|0),gO=0;function _O(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++gO,this.fa=this.ia=!1}function io(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function zd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gv(n){const e={};for(const t in n)e[t]=n[t];return e}const _v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<_v.length;s++)t=_v[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function so(n){this.src=n,this.g={},this.h=0}function $d(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=lv(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(io(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qd(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}so.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=qd(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new _O(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var jd="closure_lm_"+(1e6*Math.random()|0),Wd={};function vv(n,e,t,r,i){if(r&&r.once)return Tv(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vv(n,e[s],t,r,i);return null}return t=Yd(t),n&&n[di]?n.O(e,t,ui(r)?!!r.capture:!!r,i):Iv(n,e,t,!1,r,i)}function Iv(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=ui(i)?!!i.capture:!!i,a=Hd(n);if(a||(n[jd]=a=new so(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function vO(){const e=IO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lO||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Tv(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Tv(n,e[s],t,r,i);return null}return t=Yd(t),n&&n[di]?n.P(e,t,ui(r)?!!r.capture:!!r,i):Iv(n,e,t,!0,r,i)}function wv(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)wv(n,e[s],t,r,i);else r=ui(r)?!!r.capture:!!r,t=Yd(t),n&&n[di]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qd(s=n.g[e],t,r,i))&&(io(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Hd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qd(e,t,r,i)),(t=-1<n?e[n]:null)&&Kd(t))}function Kd(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[di])$d(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hd(e))?($d(t,n),0==t.h&&(t.src=null,e[jd]=null)):io(n)}}}function bv(n){return n in Wd?Wd[n]:Wd[n]="on"+n}function IO(n,e){if(n.fa)n=!0;else{e=new hi(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Kd(n),n=t.call(r,e)}return n}function Hd(n){return(n=n[jd])instanceof so?n:null}var Qd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yd(n){return"function"==typeof n?n:(n[Qd]||(n[Qd]=function(e){return n.handleEvent(e)}),n[Qd])}function Te(){jt.call(this),this.i=new so(this),this.S=this,this.J=null}function Ae(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ne(e,n);else if(e instanceof Ne)e.target=e.target||n;else{var i=e;yv(e=new Ne(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=oo(o,r,!0,e)&&i}if(i=oo(o=e.g=n,r,!0,e)&&i,i=oo(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=oo(o=e.g=t[s],r,!1,e)&&i}function oo(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&$d(n.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Ie(Te,jt),Te.prototype[di]=!0,Te.prototype.removeEventListener=function(n,e,t,r){wv(this,n,e,t,r)},Te.prototype.N=function(){if(Te.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)io(t[r]);delete n.g[e],n.h--}}this.J=null},Te.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Te.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Zd=L.JSON.stringify;function wO(){var n=Jd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ev=new class TO{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new EO,n=>n.reset());class EO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function SO(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xO(n){L.setTimeout(()=>{throw n},0)}let fi,pi=!1,Jd=new class bO{constructor(){this.h=this.g=null}add(e,t){const r=Ev.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Sv=()=>{const n=L.Promise.resolve(void 0);fi=()=>{n.then(AO)}};var AO=()=>{for(var n;n=wO();){try{n.h.call(n.g)}catch(t){xO(t)}var e=Ev;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pi=!1};function ao(n,e){Te.call(this),this.h=n||1,this.g=e||L,this.j=Re(this.qb,this),this.l=Date.now()}function Xd(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ef(n,e,t){if("function"==typeof n)t&&(n=Re(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Re(n.handleEvent,n)}return 2147483647<Number(e)?-1:L.setTimeout(n,e||0)}function xv(n){n.g=ef(()=>{n.g=null,n.i&&(n.i=!1,xv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ie(ao,Te),(x=ao.prototype).ga=!1,x.T=null,x.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ae(this,"tick"),this.ga&&(Xd(this),this.start()))}},x.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},x.N=function(){ao.$.N.call(this),Xd(this),delete this.g};class CO extends jt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xv(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(n){jt.call(this),this.h=n,this.g={}}Ie(mi,jt);var Av=[];function Cv(n,e,t,r){Array.isArray(t)||(t&&(Av[0]=t.toString()),t=Av);for(var i=0;i<t.length;i++){var s=vv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function kv(n){zd(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kd(e)},n),n.g={}}function co(){this.g=!0}function cr(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function PO(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Zd(t)}catch{return e}}(n,t)+(r?" "+r:"")})}mi.prototype.N=function(){mi.$.N.call(this),kv(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},co.prototype.Ea=function(){this.g=!1},co.prototype.info=function(){};var An={},Dv=null;function uo(){return Dv=Dv||new Te}function Ov(n){Ne.call(this,An.Ta,n)}function gi(n){const e=uo();Ae(e,new Ov(e))}function Pv(n,e){Ne.call(this,An.STAT_EVENT,n),this.stat=e}function Ve(n){const e=uo();Ae(e,new Pv(e,n))}function Rv(n,e){Ne.call(this,An.Ua,n),this.size=e}function _i(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){n()},e)}An.Ta="serverreachability",Ie(Ov,Ne),An.STAT_EVENT="statevent",Ie(Pv,Ne),An.Ua="timingevent",Ie(Rv,Ne);var lo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Nv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tf(){}function Lv(){}tf.prototype.h=null;var sf,yi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nf(){Ne.call(this,"d")}function rf(){Ne.call(this,"c")}function ho(){}function vi(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new mi(this),this.P=RO,this.V=new ao(n=Ld?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Fv}function Fv(){this.i=null,this.g="",this.h=!1}Ie(nf,Ne),Ie(rf,Ne),Ie(ho,tf),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},sf=new ho;var RO=45e3,of={},fo={};function af(n,e,t){n.L=1,n.v=_o(Ct(e)),n.s=t,n.S=!0,Uv(n,null)}function Uv(n,e){n.G=Date.now(),Ii(n),n.A=Ct(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Hv(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Fv,n.g=v0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new CO(Re(n.Pa,n,n.g),n.O)),Cv(n.U,n.g,"readystatechange",n.nb),e=n.I?gv(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),gi(),function kO(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Vv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Gv(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=NO(n,t),i==fo){4==e&&(n.o=4,Ve(14),r=!1),cr(n.j,n.m,null,"[Incomplete Response]");break}if(i==of){n.o=4,Ve(15),cr(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cr(n.j,n.m,i,null),cf(n,i)}Vv(n)&&i!=fo&&i!=of&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ve(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),mf(e),e.M=!0,Ve(11))):(cr(n.j,n.m,t,"[Invalid Chunked Response]"),Cn(n),Ti(n))}function NO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fo:(t=Number(e.substring(t,r)),isNaN(t)?of:(r+=1)+t>e.length?fo:(e=e.slice(r,r+t),n.C=r+t,e))}function Ii(n){n.Y=Date.now()+n.P,Bv(n,n.P)}function Bv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_i(Re(n.lb,n),e)}function po(n){n.B&&(L.clearTimeout(n.B),n.B=null)}function Ti(n){0==n.l.H||n.J||m0(n.l,n)}function Cn(n){po(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Xd(n.V),kv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function cf(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||uf(t.i,n)))if(!n.K&&uf(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;bo(t),To(t)}pf(t),Ve(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=_i(Re(t.ib,t),6e3));if(1>=Zv(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Dn(t,11)}else if((n.K||t.g==n)&&bo(t),!li(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const l=u[3];null!=l&&(t.ra=l,t.l.info("VER="+t.ra));const d=u[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const f=u[5];null!=f&&"number"==typeof f&&0<f&&(t.L=r=1.5*f,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const m=n.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||-1==y.indexOf("spdy")&&-1==y.indexOf("quic")&&-1==y.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(lf(s,s.h),s.h=null))}if(r.F){const T=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,Q(r.I,r.F,T))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=y0(r,r.J?r.pa:null,r.Y),o.K){Jv(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(po(a),Ii(a)),r.g=o}else f0(r);0<t.j.length&&wo(t)}else"stop"!=u[0]&&"close"!=u[0]||Dn(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Dn(t,7):ff(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}gi()}catch{}}function zv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(to(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function LO(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(to(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function MO(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(to(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(x=vi.prototype).setTimeout=function(n){this.P=n},x.nb=function(n){n=n.target;const e=this.M;e&&3==dt(n)?e.l():this.Pa(n)},x.Pa=function(n){try{if(n==this.g)e:{const l=dt(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||Ld||this.g&&(this.h.h||this.g.ja()||a0(this.g)))){this.J||4!=l||7==e||gi(),po(this);var t=this.g.da();this.ca=t;t:if(Vv(this)){var r=a0(this.g);n="";var i=r.length,s=4==dt(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),Ti(this);var o="";break t}this.h.i=new L.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function DO(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!li(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,Ve(12),Cn(this),Ti(this);break e}cr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cf(this,t)}this.S?(Gv(this,l,o),Ld&&this.i&&3==l&&(Cv(this.U,this.V,"tick",this.mb),this.V.start())):(cr(this.j,this.m,o,null),cf(this,o)),4==l&&Cn(this),this.i&&!this.J&&(4==l?m0(this.l,this):(this.i=!1,Ii(this)))}else(function e2(n){const e={};n=(n.g&&2<=dt(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(li(n[r]))continue;var t=SO(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function yO(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Ve(12)):(this.o=0,Ve(13)),Cn(this),Ti(this)}}}catch{}},x.mb=function(){if(this.g){var n=dt(this.g),e=this.g.ja();this.C<e.length&&(po(this),Gv(this,n,e),this.i&&4!=n&&Ii(this))}},x.cancel=function(){this.J=!0,Cn(this)},x.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function OO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(gi(),Ve(17)),Cn(this),this.o=2,Ti(this)):Bv(this,this.Y-n)};var $v=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kn(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kn){this.h=n.h,mo(this,n.j),this.s=n.s,this.g=n.g,go(this,n.m),this.l=n.l;var e=n.i,t=new Ei;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),qv(this,t),this.o=n.o}else n&&(e=String(n).match($v))?(this.h=!1,mo(this,e[1]||"",!0),this.s=wi(e[2]||""),this.g=wi(e[3]||"",!0),go(this,e[4]),this.l=wi(e[5]||"",!0),qv(this,e[6]||"",!0),this.o=wi(e[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}function Ct(n){return new kn(n)}function mo(n,e,t){n.j=t?wi(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function go(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qv(n,e,t){e instanceof Ei?(n.i=e,function $O(n,e){e&&!n.j&&(Wt(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Wv(this,r),Hv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bi(e,BO)),n.i=new Ei(e,n.h))}function Q(n,e,t){n.i.set(e,t)}function _o(n){return Q(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wi(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,UO),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UO(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bi(e,jv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bi(e,jv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bi(t,"/"==t.charAt(0)?GO:VO,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bi(t,zO)),n.join("")};var jv=/[#\/\?@]/g,VO=/[#\?:]/g,GO=/[#\?]/g,BO=/[#\?@]/g,zO=/#/g;function Ei(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wt(n){n.g||(n.g=new Map,n.h=0,n.i&&function FO(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wv(n,e){Wt(n),e=ur(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Kv(n,e){return Wt(n),e=ur(n,e),n.g.has(e)}function Hv(n,e,t){Wv(n,e),0<t.length&&(n.i=null,n.g.set(ur(n,e),Nd(t)),n.h+=t.length)}function ur(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Qv(n){this.l=n||jO,n=L.PerformanceNavigationTiming?0<(n=L.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(x=Ei.prototype).add=function(n,e){Wt(this),this.i=null,n=ur(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},x.forEach=function(n,e){Wt(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},x.ta=function(){Wt(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},x.Z=function(n){Wt(this);let e=[];if("string"==typeof n)Kv(this,n)&&(e=e.concat(this.g.get(ur(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},x.set=function(n,e){return Wt(this),this.i=null,Kv(this,n=ur(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},x.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},x.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var jO=10;function Yv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Zv(n){return n.h?1:n.g?n.g.size:0}function uf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lf(n,e){n.g?n.g.add(e):n.h=e}function Jv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Xv(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Nd(n.i)}Qv.prototype.cancel=function(){if(this.i=Xv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var WO=class{stringify(n){return L.JSON.stringify(n,void 0)}parse(n){return L.JSON.parse(n,void 0)}};function KO(){this.g=new WO}function HO(n,e,t){const r=t||"";try{zv(n,function(i,s){let o=i;ui(i)&&(o=Zd(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yo(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Si(n){this.l=n.fc||null,this.j=n.ob||!1}function vo(n,e){Te.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=hf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ie(Si,tf),Si.prototype.g=function(){return new vo(this.l,this.j)},Si.prototype.i=function(n){return function(){return n}}({}),Ie(vo,Te);var hf=0;function e0(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function xi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ai(n)}function Ai(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(x=vo.prototype).open=function(n,e){if(this.readyState!=hf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ai(this)},x.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||L).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xi(this)),this.readyState=hf},x.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e0(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},x.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xi(this):Ai(this),3==this.readyState&&e0(this)}},x.Za=function(n){this.g&&(this.response=this.responseText=n,xi(this))},x.Ya=function(n){this.g&&(this.response=n,xi(this))},x.ka=function(){this.g&&xi(this)},x.setRequestHeader=function(n,e){this.v.append(n,e)},x.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},x.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var YO=L.JSON.parse;function se(n){Te.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=t0,this.L=this.M=!1}Ie(se,Te);var t0="",ZO=/^https?$/i,JO=["POST","PUT"];function n0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,r0(n),Io(n)}function r0(n){n.F||(n.F=!0,Ae(n,"complete"),Ae(n,"error"))}function s0(n){if(n.h&&typeof Pd<"u"&&(!n.C[1]||4!=dt(n)||2!=n.da()))if(n.v&&4==dt(n))ef(n.La,0,n);else if(Ae(n,"readystatechange"),4==dt(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match($v)[1]||null;!i&&L.self&&L.self.location&&(i=L.self.location.protocol.slice(0,-1)),r=!ZO.test(i?i.toLowerCase():"")}t=r}if(t)Ae(n,"complete"),Ae(n,"success");else{n.m=6;try{var s=2<dt(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",r0(n)}}finally{Io(n)}}}function Io(n,e){if(n.g){o0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ae(n,"ready");try{t.onreadystatechange=r}catch{}}}function o0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(L.clearTimeout(n.A),n.A=null)}function dt(n){return n.g?n.g.readyState:0}function a0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case t0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function c0(n){let e="";return zd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function df(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=c0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Q(n,e,t))}function Ci(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function u0(n){this.Ga=0,this.j=[],this.l=new co,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ci("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ci("baseRetryDelayMs",5e3,n),this.hb=Ci("retryDelaySeedMs",1e4,n),this.eb=Ci("forwardChannelMaxRetries",2,n),this.xa=Ci("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Qv(n&&n.concurrentRequestLimit),this.Ja=new KO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ff(n){if(l0(n),3==n.H){var e=n.W++,t=Ct(n.I);if(Q(t,"SID",n.K),Q(t,"RID",e),Q(t,"TYPE","terminate"),ki(n,t),(e=new vi(n,n.l,e)).L=2,e.v=_o(Ct(t)),t=!1,L.navigator&&L.navigator.sendBeacon)try{t=L.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&L.Image&&((new Image).src=e.v,t=!0),t||(e.g=v0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ii(e)}_0(n)}function To(n){n.g&&(mf(n),n.g.cancel(),n.g=null)}function l0(n){To(n),n.u&&(L.clearTimeout(n.u),n.u=null),bo(n),n.i.cancel(),n.m&&("number"==typeof n.m&&L.clearTimeout(n.m),n.m=null)}function wo(n){if(!Yv(n.i)&&!n.m){n.m=!0;var e=n.Na;fi||Sv(),pi||(fi(),pi=!0),Jd.add(e,n),n.C=0}}function h0(n,e){var t;t=e?e.m:n.W++;const r=Ct(n.I);Q(r,"SID",n.K),Q(r,"RID",t),Q(r,"AID",n.V),ki(n,r),n.o&&n.s&&df(r,n.o,n.s),t=new vi(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=d0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),lf(n.i,t),af(t,r,e)}function ki(n,e){n.na&&zd(n.na,function(t,r){Q(e,r,t)}),n.h&&zv({},function(t,r){Q(e,r,t)})}function d0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Re(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let u=i[c].g;const l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{HO(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function f0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;fi||Sv(),pi||(fi(),pi=!0),Jd.add(e,n),n.A=0}}function pf(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=_i(Re(n.Ma,n),g0(n,n.A)),n.A++,0))}function mf(n){null!=n.B&&(L.clearTimeout(n.B),n.B=null)}function p0(n){n.g=new vi(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ct(n.wa);Q(e,"RID","rpc"),Q(e,"SID",n.K),Q(e,"AID",n.V),Q(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Q(e,"TO",n.qa),Q(e,"TYPE","xmlhttp"),ki(n,e),n.o&&n.s&&df(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=_o(Ct(e)),t.s=null,t.S=!0,Uv(t,n)}function bo(n){null!=n.v&&(L.clearTimeout(n.v),n.v=null)}function m0(n,e){var t=null;if(n.g==e){bo(n),mf(n),n.g=null;var r=2}else{if(!uf(n.i,e))return;t=e.F,Jv(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ae(r=uo(),new Rv(r,t)),wo(n)}else f0(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function t2(n,e){return!(Zv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=_i(Re(n.Na,n,e),g0(n,n.C)),n.C++,0)))}(n,e)||2==r&&pf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Dn(n,5);break;case 4:Dn(n,10);break;case 3:Dn(n,6);break;default:Dn(n,2)}}function g0(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Dn(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Re(n.pb,n);t||(t=new kn("//www.google.com/images/cleardot.gif"),L.location&&"http"==L.location.protocol||mo(t,"https"),_o(t)),function QO(n,e){const t=new co;if(L.Image){const r=new Image;r.onload=no(yo,t,r,"TestLoadImage: loaded",!0,e),r.onerror=no(yo,t,r,"TestLoadImage: error",!1,e),r.onabort=no(yo,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=no(yo,t,r,"TestLoadImage: timeout",!1,e),L.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ve(2);n.H=0,n.h&&n.h.za(e),_0(n),l0(n)}function _0(n){if(n.H=0,n.ma=[],n.h){const e=Xv(n.i);(0!=e.length||0!=n.j.length)&&(hv(n.ma,e),hv(n.ma,n.j),n.i.i.length=0,Nd(n.j),n.j.length=0),n.h.ya()}}function y0(n,e,t){var r=t instanceof kn?Ct(t):new kn(t);if(""!=r.g)e&&(r.g=e+"."+r.g),go(r,r.m);else{var i=L.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new kn(null);r&&mo(s,r),e&&(s.g=e),i&&go(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Q(r,t,e),Q(r,"VER",n.ra),ki(n,r),r}function v0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new se(t&&n.Ha&&!n.va?new Si({ob:!0}):n.va)).Oa(n.J),e}function I0(){}function Eo(){if(ar&&!(10<=Number(pO)))throw Error("Environmental error: no available transport.")}function Ke(n,e){Te.call(this),this.g=new u0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!li(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!li(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lr(this)}function T0(n){nf.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function w0(){rf.call(this),this.status=1}function lr(n){this.g=n}function it(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gf(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function z(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(x=se.prototype).Oa=function(n){this.M=n},x.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sf.g(),this.C=function Mv(n){return n.h||(n.h=n.i())}(this.u?this.u:sf),this.g.onreadystatechange=Re(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void n0(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=L.FormData&&n instanceof L.FormData,!(0<=lv(JO,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{o0(this),0<this.B&&((this.L=function XO(n){return ar&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Re(this.ua,this)):this.A=ef(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){n0(this,s)}},x.ua=function(){typeof Pd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ae(this,"timeout"),this.abort(8))},x.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ae(this,"complete"),Ae(this,"abort"),Io(this))},x.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Io(this,!0)),se.$.N.call(this)},x.La=function(){this.s||(this.G||this.v||this.l?s0(this):this.kb())},x.kb=function(){s0(this)},x.isActive=function(){return!!this.g},x.da=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},x.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},x.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),YO(e)}},x.Ia=function(){return this.m},x.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(x=u0.prototype).ra=8,x.H=1,x.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new vi(this,this.l,n);let s=this.s;if(this.U&&(s?(s=gv(s),yv(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=d0(this,i,e),Q(t=Ct(this.I),"RID",n),Q(t,"CVER",22),this.F&&Q(t,"X-HTTP-Session-Id",this.F),ki(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(c0(s)))+"&"+e:this.o&&df(t,this.o,s)),lf(this.i,i),this.bb&&Q(t,"TYPE","init"),this.P?(Q(t,"$req",e),Q(t,"SID","null"),i.aa=!0,af(i,t,null)):af(i,t,e),this.H=2}}else 3==this.H&&(n?h0(this,n):0==this.j.length||Yv(this.i)||h0(this))},x.Ma=function(){if(this.u=null,p0(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=_i(Re(this.jb,this),n)}},x.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ve(10),To(this),p0(this))},x.ib=function(){null!=this.v&&(this.v=null,To(this),pf(this),Ve(19))},x.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ve(2)):(this.l.info("Failed to ping google.com"),Ve(1))},x.isActive=function(){return!!this.h&&this.h.isActive(this)},(x=I0.prototype).Ba=function(){},x.Aa=function(){},x.za=function(){},x.ya=function(){},x.isActive=function(){return!0},x.Va=function(){},Eo.prototype.g=function(n,e){return new Ke(n,e)},Ie(Ke,Te),Ke.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ve(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=y0(n,null,n.Y),wo(n)},Ke.prototype.close=function(){ff(this.g)},Ke.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Zd(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&wo(e)},Ke.prototype.N=function(){this.g.h=null,delete this.j,ff(this.g),delete this.g,Ke.$.N.call(this)},Ie(T0,nf),Ie(w0,rf),Ie(lr,I0),lr.prototype.Ba=function(){Ae(this.g,"a")},lr.prototype.Aa=function(n){Ae(this.g,new T0(n))},lr.prototype.za=function(n){Ae(this.g,new w0)},lr.prototype.ya=function(){Ae(this.g,"b")},Ie(it,function n2(){this.blockSize=-1}),it.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},it.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)gf(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){gf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){gf(this,r),i=0;break}}this.h=i,this.i+=e},it.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var r2={};function _f(n){return-128<=n&&128>n?function hO(n,e){var t=r2;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new z([0|e],0>e?-1:0)}):new z([0|n],0>n?-1:0)}function ft(n){if(isNaN(n)||!isFinite(n))return hr;if(0>n)return Ce(ft(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=yf;return new z(e,0)}var yf=4294967296,hr=_f(0),vf=_f(1),E0=_f(16777216);function kt(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function tt(n){return-1==n.h}function Ce(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new z(t,~n.h).add(vf)}function So(n,e){return n.add(Ce(e))}function xo(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Di(n,e){this.g=n,this.h=e}function Ao(n,e){if(kt(e))throw Error("division by zero");if(kt(n))return new Di(hr,hr);if(tt(n))return e=Ao(Ce(n),e),new Di(Ce(e.g),Ce(e.h));if(tt(e))return e=Ao(n,Ce(e)),new Di(Ce(e.g),e.h);if(30<n.g.length){if(tt(n)||tt(e))throw Error("slowDivide_ only works with positive integers.");for(var t=vf,r=e;0>=r.X(n);)t=S0(t),r=S0(r);var i=dr(t,1),s=dr(r,1);for(r=dr(r,2),t=dr(t,2);!kt(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=dr(r,1),t=dr(t,1)}return e=So(n,i.R(e)),new Di(i,e)}for(i=hr;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ft(t)).R(e);tt(o)||0<o.X(n);)o=(s=ft(t-=r)).R(e);kt(s)&&(s=vf),i=i.add(s),n=So(n,o)}return new Di(i,n)}function S0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new z(t,n.h)}function dr(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new z(i,n.h)}(x=z.prototype).ea=function(){if(tt(this))return-Ce(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:yf+r)*e,e*=yf}return n},x.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(kt(this))return"0";if(tt(this))return"-"+Ce(this).toString(n);for(var e=ft(Math.pow(n,6)),t=this,r="";;){var i=Ao(t,e).g,s=((0<(t=So(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(kt(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},x.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},x.X=function(n){return tt(n=So(this,n))?-1:kt(n)?0:1},x.abs=function(){return tt(this)?Ce(this):this},x.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new z(t,-2147483648&t[t.length-1]?-1:0)},x.R=function(n){if(kt(this)||kt(n))return hr;if(tt(this))return tt(n)?Ce(this).R(Ce(n)):Ce(Ce(this).R(n));if(tt(n))return Ce(this.R(Ce(n)));if(0>this.X(E0)&&0>n.X(E0))return ft(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,c=65535&n.D(i);t[2*r+2*i]+=o*c,xo(t,2*r+2*i),t[2*r+2*i+1]+=s*c,xo(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,xo(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,xo(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new z(t,0)},x.gb=function(n){return Ao(this,n).h},x.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new z(t,this.h&n.h)},x.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new z(t,this.h|n.h)},x.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new z(t,this.h^n.h)},Eo.prototype.createWebChannel=Eo.prototype.g,Ke.prototype.send=Ke.prototype.u,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,Nv.COMPLETE="complete",Lv.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",Te.prototype.listen=Te.prototype.O,se.prototype.listenOnce=se.prototype.P,se.prototype.getLastError=se.prototype.Sa,se.prototype.getLastErrorCode=se.prototype.Ia,se.prototype.getStatus=se.prototype.da,se.prototype.getResponseJson=se.prototype.Wa,se.prototype.getResponseText=se.prototype.ja,se.prototype.send=se.prototype.ha,se.prototype.setWithCredentials=se.prototype.Oa,it.prototype.digest=it.prototype.l,it.prototype.reset=it.prototype.reset,it.prototype.update=it.prototype.j,z.prototype.add=z.prototype.add,z.prototype.multiply=z.prototype.R,z.prototype.modulo=z.prototype.gb,z.prototype.compare=z.prototype.X,z.prototype.toNumber=z.prototype.ea,z.prototype.toString=z.prototype.toString,z.prototype.getBits=z.prototype.D,z.fromNumber=ft,z.fromString=function b0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ce(b0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ft(Math.pow(e,8)),r=hr,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=ft(Math.pow(e,s)),r=r.R(s).add(ft(o))):r=(r=r.R(t)).add(ft(o))}return r};var s2=rt.createWebChannelTransport=function(){return new Eo},o2=rt.getStatEventTarget=function(){return uo()},If=rt.ErrorCode=lo,a2=rt.EventType=Nv,c2=rt.Event=An,x0=rt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},u2=rt.FetchXmlHttpFactory=Si,Co=rt.WebChannel=Lv,l2=rt.XhrIo=se,h2=rt.Md5=it,fr=rt.Integer=z;const A0="@firebase/firestore";class we{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}we.UNAUTHENTICATED=new we(null),we.GOOGLE_CREDENTIALS=new we("google-credentials-uid"),we.FIRST_PARTY=new we("first-party-uid"),we.MOCK_USER=new we("mock-user");let pr="9.23.0";const Kt=new dn("@firebase/firestore");function Tf(){return Kt.logLevel}function I(n,...e){if(Kt.logLevel<=P.DEBUG){const t=e.map(wf);Kt.debug(`Firestore (${pr}): ${n}`,...t)}}function ce(n,...e){if(Kt.logLevel<=P.ERROR){const t=e.map(wf);Kt.error(`Firestore (${pr}): ${n}`,...t)}}function st(n,...e){if(Kt.logLevel<=P.WARN){const t=e.map(wf);Kt.warn(`Firestore (${pr}): ${n}`,...t)}}function wf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function A(n="Unexpected state"){const e=`FIRESTORE (${pr}) INTERNAL ASSERTION FAILED: `+n;throw ce(e),new Error(e)}function C(n,e){n||A()}function S(n,e){return n}const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class v extends We{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ge{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class C0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(we.UNAUTHENTICATED))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class p2{constructor(e){this.t=e,this.currentUser=we.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new ge;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ge,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(p(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ge)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(C("string"==typeof r.accessToken),new C0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return C(null===e||"string"==typeof e),new we(e)}}class m2{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=we.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class g2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new m2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(we.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _2{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(C("string"==typeof t.token),this.T=t.token,new k0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function y2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class D0{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=y2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function R(n,e){return n<e?-1:n>e?1:0}function mr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class te{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new v(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new v(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new v(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new v(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return te.fromMillis(Date.now())}static fromDate(e){return te.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new te(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class k{constructor(e){this.timestamp=e}static fromTimestamp(e){return new k(e)}static min(){return new k(new te(0,0))}static max(){return new k(new te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Oi{constructor(e,t,r){void 0===t?t=0:t>e.length&&A(),void 0===r?r=e.length-t:r>e.length-t&&A(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Oi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class G extends Oi{construct(e,t,r){return new G(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new v(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new G(t)}static emptyPath(){return new G([])}}const v2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends Oi{construct(e,t,r){return new ue(e,t,r)}static isValidIdentifier(e){return v2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ue(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new v(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new v(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new v(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new v(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ue(t)}static emptyPath(){return new ue([])}}class E{constructor(e){this.path=e}static fromPath(e){return new E(G.fromString(e))}static fromName(e){return new E(G.fromString(e).popFirst(5))}static empty(){return new E(G.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===G.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return G.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new E(new G(e.slice()))}}function R0(n){return new He(n.readTime,n.key,-1)}class He{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new He(k.min(),E.empty(),-1)}static max(){return new He(k.max(),E.empty(),-1)}}function Ef(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=E.comparator(n.documentKey,e.documentKey),0!==t?t:R(n.largestBatchId,e.largestBatchId))}const N0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ht(n){return Sf.apply(this,arguments)}function Sf(){return Sf=p(function*(n){if(n.code!==_.FAILED_PRECONDITION||n.message!==N0)throw n;I("LocalStore","Unexpectedly lost primary lease")}),Sf.apply(this,arguments)}class g{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new g((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof g?t:g.resolve(t)}catch(t){return g.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):g.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):g.reject(t)}static resolve(e){return new g((t,r)=>{t(e)})}static reject(e){return new g((t,r)=>{r(e)})}static waitFor(e){return new g((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=g.resolve(!1);for(const r of e)t=t.next(i=>i?g.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new g((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,t){return new g((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Qt(n){return"IndexedDbTransactionError"===n.name}let Qe=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ni(n){return null==n}function Mi(n){return 0===n&&1/n==-1/0}function $0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yt(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class K{constructor(e,t){this.comparator=e,this.root=t||ke.EMPTY}insert(e,t){return new K(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(e){return new K(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ke.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ro(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ro(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ro(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ro(this.root,e,this.comparator,!0)}}class Ro{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ke{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ke.RED,this.left=i??ke.EMPTY,this.right=s??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ke(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ke.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();const e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1,ke.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ke(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Y{constructor(e){this.comparator=e,this.data=new K(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Y)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Y(this.comparator);return t.data=e,t}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $e{constructor(e){this.fields=e,e.sort(ue.comparator)}static empty(){return new $e([])}unionWith(e){let t=new Y(ue.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $e(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mr(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class W0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _e{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new W0("Invalid base64 string: "+i):i}}(e);return new _e(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new _e(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zt(n){if(C(!!n),"string"==typeof n){let e=0;const t=j2.exec(n);if(C(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oe(n.seconds),nanos:oe(n.nanos)}}function oe(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dt(n){return"string"==typeof n?_e.fromBase64String(n):_e.fromUint8Array(n)}function No(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mo(n){const e=n.mapValue.fields.__previous_value__;return No(e)?Mo(e):e}function Li(n){const e=Zt(n.mapValue.fields.__local_write_time__.timestampValue);return new te(e.seconds,e.nanos)}class W2{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Rn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rn&&e.projectId===this.projectId&&e.database===this.database}}const Jt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?No(n)?4:Y0(n)?9007199254740991:10:A()}function mt(n,e){if(n===e)return!0;const t=Xt(n);if(t!==Xt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Li(n).isEqual(Li(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Zt(r.timestampValue),o=Zt(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dt(n.bytesValue).isEqual(Dt(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return oe(r.geoPointValue.latitude)===oe(i.geoPointValue.latitude)&&oe(r.geoPointValue.longitude)===oe(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return oe(r.integerValue)===oe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=oe(r.doubleValue),o=oe(i.doubleValue);return s===o?Mi(s)===Mi(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return mr(n.arrayValue.values||[],e.arrayValue.values||[],mt);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if($0(s)!==$0(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!mt(s[a],o[a])))return!1;return!0}(n,e);default:return A()}var i}function Fi(n,e){return void 0!==(n.values||[]).find(t=>mt(t,e))}function en(n,e){if(n===e)return 0;const t=Xt(n),r=Xt(e);if(t!==r)return R(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return R(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=oe(i.integerValue||i.doubleValue),a=oe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return K0(n.timestampValue,e.timestampValue);case 4:return K0(Li(n),Li(e));case 5:return R(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Dt(i),a=Dt(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=R(o[c],a[c]);if(0!==u)return u}return R(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=R(oe(i.latitude),oe(s.latitude));return 0!==o?o:R(oe(i.longitude),oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const u=en(o[c],a[c]);if(u)return u}return R(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Jt.mapValue&&s===Jt.mapValue)return 0;if(i===Jt.mapValue)return 1;if(s===Jt.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),c=s.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let l=0;l<a.length&&l<u.length;++l){const d=R(a[l],u[l]);if(0!==d)return d;const f=en(o[a[l]],c[u[l]]);if(0!==f)return f}return R(a.length,u.length)}(n.mapValue,e.mapValue);default:throw A()}}function K0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return R(n,e);const t=Zt(n),r=Zt(e),i=R(t.seconds,r.seconds);return 0!==i?i:R(t.nanos,r.nanos)}function _r(n){return Cf(n)}function Cf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Zt(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dt(n.bytesValue).toBase64():"referenceValue"in n?E.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Cf(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Cf(r.fields[a])}`;return s+"}"}(n.mapValue):A();var e}function kf(n){return!!n&&"integerValue"in n}function Ui(n){return!!n&&"arrayValue"in n}function H0(n){return!!n&&"nullValue"in n}function Q0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uo(n){return!!n&&"mapValue"in n}function Vi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yt(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vi(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Y0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class De{constructor(e){this.value=e}static empty(){return new De({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vi(t)}setAll(e){let t=ue.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Vi(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Uo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Uo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yt(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new De(Vi(this.value))}}class Z{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Z(e,0,k.min(),k.min(),k.min(),De.empty(),0)}static newFoundDocument(e,t,r,i){return new Z(e,1,t,k.min(),r,i,0)}static newNoDocument(e,t){return new Z(e,2,t,k.min(),k.min(),De.empty(),0)}static newUnknownDocument(e,t){return new Z(e,3,t,k.min(),k.min(),De.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(k.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Z&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Z(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tn{constructor(e,t){this.position=e,this.inclusive=t}}function eI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?E.comparator(E.fromName(o.referenceValue),t.key):en(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function tI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mt(n.position[t],e.position[t]))return!1;return!0}class yr{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class nI{}class U extends nI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Y2(e,t,r):"array-contains"===t?new X2(e,r):"in"===t?new cI(e,r):"not-in"===t?new eP(e,r):"array-contains-any"===t?new tP(e,r):new U(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Z2(e,r):new J2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(en(t,this.value)):null!==t&&Xt(this.value)===Xt(t)&&this.matchesComparison(en(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $ extends nI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new $(e,t)}matches(e){return vr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vr(n){return"and"===n.op}function Of(n){return function rI(n){for(const e of n.filters)if(e instanceof $)return!1;return!0}(n)&&vr(n)}function Pf(n){if(n instanceof U)return n.field.canonicalString()+n.op.toString()+_r(n.value);if(Of(n))return n.filters.map(e=>Pf(e)).join(",");{const e=n.filters.map(t=>Pf(t)).join(",");return`${n.op}(${e})`}}function iI(n,e){return n instanceof U?(t=n,(r=e)instanceof U&&t.op===r.op&&t.field.isEqual(r.field)&&mt(t.value,r.value)):n instanceof $?function(t,r){return r instanceof $&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&iI(s,r.filters[o]),!0)}(n,e):void A();var t,r}function oI(n){return n instanceof U?function(e){return`${e.field.canonicalString()} ${e.op} ${_r(e.value)}`}(n):n instanceof $?function(e){return e.op.toString()+" {"+e.getFilters().map(oI).join(" ,")+"}"}(n):"Filter"}class Y2 extends U{constructor(e,t,r){super(e,t,r),this.key=E.fromName(r.referenceValue)}matches(e){const t=E.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z2 extends U{constructor(e,t){super(e,"in",t),this.keys=aI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J2 extends U{constructor(e,t){super(e,"not-in",t),this.keys=aI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>E.fromName(r.referenceValue))}class X2 extends U{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ui(t)&&Fi(t.arrayValue,this.value)}}class cI extends U{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fi(this.value.arrayValue,t)}}class eP extends U{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fi(this.value.arrayValue,t)}}class tP extends U{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ui(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fi(this.value.arrayValue,r))}}class nP{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function Rf(n,e=null,t=[],r=[],i=null,s=null,o=null){return new nP(n,e,t,r,i,s,o)}function Mn(n){const e=S(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ni(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_r(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_r(r)).join(",")),e.dt=t}return e.dt}function Gi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tI(n.startAt,e.startAt)&&tI(n.endAt,e.endAt)}function Vo(n){return E.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ot{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.wt=null,this._t=null}}function Ir(n){return new Ot(n)}function dI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ln(n){const e=S(n);if(null===e.wt){e.wt=[];const t=function Bo(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function Nf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new yr(t)),e.wt.push(new yr(ue.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new yr(ue.keyField(),s))}}}return e.wt}function Ge(n){const e=S(n);if(!e._t)if("F"===e.limitType)e._t=Rf(e.path,e.collectionGroup,Ln(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ln(e))t.push(new yr(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new tn(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tn(e.startAt.position,e.startAt.inclusive):null;e._t=Rf(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function zo(n,e,t){return new Ot(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bi(n,e){return Gi(Ge(n),Ge(e))&&n.limitType===e.limitType}function fI(n){return`${Mn(Ge(n))}|lt:${n.limitType}`}function Ff(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>oI(r)).join(", ")}]`),Ni(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_r(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_r(r)).join(",")),`Target(${t})`}(Ge(n))}; limitType=${n.limitType})`}function zi(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):E.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ln(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=eI(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,Ln(t),r)||t.endAt&&!function(i,s,o){const a=eI(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,Ln(t),r)));var t,r}function mI(n){return(e,t)=>{let r=!1;for(const i of Ln(n)){const s=rP(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function rP(n,e,t){const r=n.field.isKeyField()?E.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),c=o.data.field(i);return null!==a&&null!==c?en(a,c):A()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return A()}}class Pt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yt(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function q0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const iP=new K(E.comparator);function qe(){return iP}const gI=new K(E.comparator);function $i(...n){let e=gI;for(const t of n)e=e.insert(t.key,t);return e}function _I(n){let e=gI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gt(){return qi()}function yI(){return qi()}function qi(){return new Pt(n=>n.toString(),(n,e)=>n.isEqual(e))}new K(E.comparator);const oP=new Y(E.comparator);function F(...n){let e=oP;for(const t of n)e=e.add(t);return e}const aP=new Y(R);class $o{constructor(){this._=void 0}}function cP(n,e,t){return n instanceof Tr?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&No(i)&&(i=Mo(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Fn?bI(n,e):n instanceof Un?EI(n,e):function(r,i){const s=function wI(n,e){return n instanceof wr?kf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}(r,i),o=SI(s)+SI(r.gt);return kf(s)&&kf(r.gt)?function II(n){return{integerValue:""+n}}(o):function vI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mi(e)?"-0":e}}(r.serializer,o)}(n,e)}function uP(n,e,t){return n instanceof Fn?bI(n,e):n instanceof Un?EI(n,e):t}class Tr extends $o{}class Fn extends $o{constructor(e){super(),this.elements=e}}function bI(n,e){const t=xI(e);for(const r of n.elements)t.some(i=>mt(i,r))||t.push(r);return{arrayValue:{values:t}}}class Un extends $o{constructor(e){super(),this.elements=e}}function EI(n,e){let t=xI(e);for(const r of n.elements)t=t.filter(i=>!mt(i,r));return{arrayValue:{values:t}}}class wr extends $o{constructor(e,t){super(),this.serializer=e,this.gt=t}}function SI(n){return oe(n.integerValue||n.doubleValue)}function xI(n){return Ui(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class X{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new X}static exists(e){return new X(void 0,e)}static updateTime(e){return new X(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qo(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vf{}function AI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Er(n.key,X.none()):new br(n.key,n.data,X.none());{const t=n.data,r=De.empty();let i=new Y(ue.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Rt(n.key,r,new $e(i.toArray()),X.none())}}function dP(n,e,t){n instanceof br?function(r,i,s){const o=r.value.clone(),a=DI(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Rt?function(r,i,s){if(!qo(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=DI(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(kI(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wi(n,e,t,r){return n instanceof br?function(i,s,o,a){if(!qo(i.precondition,s))return o;const c=i.value.clone(),u=OI(i.fieldTransforms,a,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rt?function(i,s,o,a){if(!qo(i.precondition,s))return o;const c=OI(i.fieldTransforms,a,s),u=s.data;return u.setAll(kI(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(n,e,t,r):(o=t,qo(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function CI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mr(t,r,(i,s)=>function lP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Fn&&r instanceof Fn||t instanceof Un&&r instanceof Un?mr(t.elements,r.elements,mt):t instanceof wr&&r instanceof wr?mt(t.gt,r.gt):t instanceof Tr&&r instanceof Tr);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class br extends Vf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rt extends Vf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DI(n,e,t){const r=new Map;C(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uP(o,a,t[i]))}return r}function OI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,cP(s,o,e))}return r}class Er extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bf{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&dP(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=AI(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(k.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),F())}isEqual(e){return this.batchId===e.batchId&&mr(this.mutations,e.mutations,(t,r)=>CI(t,r))&&mr(this.baseMutations,e.baseMutations,(t,r)=>CI(t,r))}}class $f{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mP{constructor(e,t){this.count=e,this.unchangedNames=t}}var fe,B;function RI(n){if(void 0===n)return ce("GRPC error has no .code"),_.UNKNOWN;switch(n){case fe.OK:return _.OK;case fe.CANCELLED:return _.CANCELLED;case fe.UNKNOWN:return _.UNKNOWN;case fe.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case fe.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case fe.INTERNAL:return _.INTERNAL;case fe.UNAVAILABLE:return _.UNAVAILABLE;case fe.UNAUTHENTICATED:return _.UNAUTHENTICATED;case fe.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case fe.NOT_FOUND:return _.NOT_FOUND;case fe.ALREADY_EXISTS:return _.ALREADY_EXISTS;case fe.PERMISSION_DENIED:return _.PERMISSION_DENIED;case fe.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case fe.ABORTED:return _.ABORTED;case fe.OUT_OF_RANGE:return _.OUT_OF_RANGE;case fe.UNIMPLEMENTED:return _.UNIMPLEMENTED;case fe.DATA_LOSS:return _.DATA_LOSS;default:return A()}}(B=fe||(fe={}))[B.OK=0]="OK",B[B.CANCELLED=1]="CANCELLED",B[B.UNKNOWN=2]="UNKNOWN",B[B.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",B[B.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",B[B.NOT_FOUND=5]="NOT_FOUND",B[B.ALREADY_EXISTS=6]="ALREADY_EXISTS",B[B.PERMISSION_DENIED=7]="PERMISSION_DENIED",B[B.UNAUTHENTICATED=16]="UNAUTHENTICATED",B[B.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",B[B.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",B[B.ABORTED=10]="ABORTED",B[B.OUT_OF_RANGE=11]="OUT_OF_RANGE",B[B.UNIMPLEMENTED=12]="UNIMPLEMENTED",B[B.INTERNAL=13]="INTERNAL",B[B.UNAVAILABLE=14]="UNAVAILABLE",B[B.DATA_LOSS=15]="DATA_LOSS";class qf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return jo}static getOrCreateInstance(){return null===jo&&(jo=new qf),jo}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let jo=null;const gP=new fr([4294967295,4294967295],0);function MI(n){const e=function NI(){return new TextEncoder}().encode(n),t=new h2;return t.update(e),new Uint8Array(t.digest())}function LI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fr([t,r],0),new fr([i,s],0)]}class jf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ki(`Invalid padding: ${t}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ki(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ki(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=fr.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(fr.fromNumber(r)));return 1===i.compare(gP)&&(i=new fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=MI(e),[r,i]=LI(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jf(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=MI(e),[r,i]=LI(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hi{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Qi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hi(k.min(),i,new K(R),qe(),F())}}class Qi{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qi(r,t,F(),F(),F())}}class Wo{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class FI{constructor(e,t){this.targetId=e,this.Vt=t}}class UI{constructor(e,t,r=_e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VI{constructor(){this.St=0,this.Dt=BI(),this.Ct=_e.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=F(),t=F(),r=F();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:A()}}),new Qi(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=BI()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _P{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=qe(),this.zt=GI(),this.Wt=new K(R)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:A()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Vo(o))if(0===i){const a=new E(o.path);this.Yt(r,a,Z.newNoDocument(a,k.min()))}else C(1===i);else{const a=this.ie(r);if(a!==i){const c=this.re(e,a);0!==c&&(this.ee(r),this.Wt=this.Wt.insert(r,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=qf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(u,l,d){var f,m,y,T,w,O;const N={localCacheCount:l,existenceFilterCount:d.count},M=d.unchangedNames;return M&&(N.bloomFilter={applied:0===u,hashCount:null!==(f=M?.hashCount)&&void 0!==f?f:0,bitmapLength:null!==(T=null===(y=null===(m=M?.bits)||void 0===m?void 0:m.bitmap)||void 0===y?void 0:y.length)&&void 0!==T?T:0,padding:null!==(O=null===(w=M?.bits)||void 0===w?void 0:w.padding)&&void 0!==O?O:0}),N}(c,a,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let c,u;try{c=Dt(s).toUint8Array()}catch(l){if(l instanceof W0)return st("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{u=new jf(c,o,a)}catch(l){return st(l instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===u.It?1:i!==t-this.oe(e.targetId,u)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Vo(a.target)){const c=new E(a.target.path);null!==this.jt.get(c)||this.ae(o,c)||this.Yt(o,c,Z.newNoDocument(c,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=F();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.se(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Hi(e,t,this.Wt,this.jt,r);return this.jt=qe(),this.zt=GI(),this.Wt=new K(R),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new VI,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Y(R),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new VI),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function GI(){return new K(E.comparator)}function BI(){return new K(E.comparator)}const yP={asc:"ASCENDING",desc:"DESCENDING"},vP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IP={and:"AND",or:"OR"};class TP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wf(n,e){return n.useProto3Json||Ni(e)?e:{value:e}}function le(n){return C(!!n),k.fromTimestamp(function(e){const t=Zt(e);return new te(t.seconds,t.nanos)}(n))}function $I(n){const e=G.fromString(n);return C(JI(e)),e}function _t(n,e){const t=$I(e);if(t.get(1)!==n.databaseId.projectId)throw new v(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new v(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new E(jI(t))}function Hf(n,e){return function Kf(n,e){return(t=n,new G(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}(n.databaseId,e)}function Zi(n){return new G(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jI(n){return C(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HI(n,e){return{documents:[Hf(n,e.path)]}}function Yf(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Hf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return ZI($.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(u=>{return{field:nn((l=u).field),direction:AP(l.dir)};var l})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=Wf(n,e.limit);var a,c;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),t}function QI(n){let e=function qI(n){const e=$I(n);return 4===e.length?G.emptyPath():jI(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){C(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(l){const d=YI(l);return d instanceof $&&Of(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(l=>{return new yr(xr((d=l).field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Ni(d)?null:d}(t.limit));let c=null;var l;t.startAt&&(c=new tn((l=t.startAt).values||[],!!l.before));let u=null;return t.endAt&&(u=function(l){return new tn(l.values||[],!l.before)}(t.endAt)),function hI(n,e,t,r,i,s,o,a){return new Ot(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",c,u)}function YI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xr(e.unaryFilter.field);return U.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=xr(e.unaryFilter.field);return U.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xr(e.unaryFilter.field);return U.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xr(e.unaryFilter.field);return U.create(s,"!=",{nullValue:"NULL_VALUE"});default:return A()}}(n):void 0!==n.fieldFilter?function(e){return U.create(xr(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):void 0!==n.compositeFilter?function(e){return $.create(e.compositeFilter.filters.map(t=>YI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return A()}}(e.compositeFilter.op))}(n):A()}function AP(n){return yP[n]}function CP(n){return vP[n]}function kP(n){return IP[n]}function nn(n){return{fieldPath:n.canonicalString()}}function xr(n){return ue.fromServerFormat(n.fieldPath)}function ZI(n){return n instanceof U?function(e){if("=="===e.op){if(Q0(e.value))return{unaryFilter:{field:nn(e.field),op:"IS_NAN"}};if(H0(e.value))return{unaryFilter:{field:nn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Q0(e.value))return{unaryFilter:{field:nn(e.field),op:"IS_NOT_NAN"}};if(H0(e.value))return{unaryFilter:{field:nn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nn(e.field),op:CP(e.op),value:e.value}}}(n):n instanceof $?function(e){const t=e.getFilters().map(r=>ZI(r));return 1===t.length?t[0]:{compositeFilter:{op:kP(e.op),filters:t}}}(n):A()}function JI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Nt{constructor(e,t,r,i,s=k.min(),o=k.min(),a=_e.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Nt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XI{constructor(e){this.fe=e}}function Zf(n){const e=QI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zo(e,e.limit,"L"):e}class zn{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(oe(e.integerValue));else if("doubleValue"in e){const r=oe(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Mi(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Dt(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Y0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):A()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),E.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}zn.Ve=new zn;class VP{constructor(){this.rn=new rp}addToCollectionParentIndex(e,t){return this.rn.add(t),g.resolve()}getCollectionParents(e,t){return g.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return g.resolve()}deleteFieldIndex(e,t){return g.resolve()}getDocumentsMatchingTarget(e,t){return g.resolve(null)}getIndexType(e,t){return g.resolve(0)}getFieldIndexes(e,t){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,t){return g.resolve(He.min())}getMinOffsetFromCollectionGroup(e,t){return g.resolve(He.min())}updateCollectionGroup(e,t,r){return g.resolve()}updateIndexEntries(e,t){return g.resolve()}}class rp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Y(G.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Y(G.comparator)).toArray()}}new Uint8Array(0);class Le{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Le(e,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(41943040,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);class qn{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qn(0)}static Mn(){return new qn(-1)}}class jP{constructor(){this.changes=new Pt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Z.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?g.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ST{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Wi(r.mutation,i,$e.empty(),te.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,F()).next(()=>r))}getLocalViewOfDocuments(e,t,r=F()){const i=gt();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$i();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=gt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,F()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=qe();const o=qi(),a=qi();return t.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(void 0===l||l.mutation instanceof Rt)?s=s.insert(u.key,u):void 0!==l?(o.set(u.key,l.mutation.getFieldMask()),Wi(l.mutation,u,l.mutation.getFieldMask(),te.now())):o.set(u.key,$e.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),t.forEach((u,l)=>{var d;return a.set(u,new HP(l,null!==(d=o.get(u))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=qi();let i=new K((o,a)=>o-a),s=F();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let l=r.get(c)||$e.empty();l=a.applyToLocalView(u,l),r.set(c,l);const d=(i.get(a.batchId)||F()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,d=yI();l.forEach(f=>{if(!s.has(f)){const m=AI(t.get(f),r.get(f));null!==m&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return g.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return E.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function Mf(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):g.resolve(gt());let a=-1,c=s;return o.next(u=>g.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?g.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,F())).next(l=>({batchId:a,changes:_I(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new E(t)).next(r=>{let i=$i();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=$i();return this.indexManager.getCollectionParents(e,i).next(o=>g.forEach(o,a=>{const c=(u=t,l=a.child(i),new Ot(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,l;return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((a,c)=>{const u=c.getKey();null===s.get(u)&&(s=s.insert(u,Z.newInvalidDocument(u)))});let o=$i();return s.forEach((a,c)=>{const u=i.get(a);void 0!==u&&Wi(u.mutation,c,$e.empty(),te.now()),zi(t,c)&&(o=o.insert(a,c))}),o})}}class QP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return g.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:le(r.createTime)}),g.resolve()}getNamedQuery(e,t){return g.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Zf(r.bundledQuery),readTime:le(r.readTime)}),g.resolve();var r}}class YP{constructor(){this.overlays=new K(E.comparator),this.ls=new Map}getOverlay(e,t){return g.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gt();return g.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),g.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),g.resolve()}getOverlaysForCollection(e,t,r){const i=gt(),s=t.length+1,o=new E(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return g.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new K((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);null===l&&(l=gt(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=gt(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return g.resolve(a)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $f(t,r));let s=this.ls.get(t);void 0===s&&(s=F(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class ip{constructor(){this.fs=new Y(Ee.ds),this.ws=new Y(Ee._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ee(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ee(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new E(new G([])),r=new Ee(t,e),i=new Ee(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new E(new G([])),r=new Ee(t,e),i=new Ee(t,e+1);let s=F();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ee(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ee{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return E.comparator(e.key,t.key)||R(e.As,t.As)}static _s(e,t){return R(e.As,t.As)||E.comparator(e.key,t.key)}}class ZP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Y(Ee.ds)}checkEmpty(e){return g.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new Bf(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new Ee(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(o)}lookupMutationBatch(e,t){return g.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return g.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ee(t,0),i=new Ee(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),g.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Y(R);return t.forEach(i=>{const s=new Ee(i,0),o=new Ee(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),g.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;E.isDocumentKey(s)||(s=s.child(""));const o=new Ee(new E(s),0);let a=new Y(R);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.As)),!0)},o),g.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){C(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return g.forEach(t.mutations,i=>{const s=new Ee(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ee(t,0),i=this.Rs.firstAfterOrEqual(r);return g.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return g.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JP{constructor(e){this.Ds=e,this.docs=new K(E.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return g.resolve(r?r.document.mutableCopy():Z.newInvalidDocument(t))}getEntries(e,t){let r=qe();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Z.newInvalidDocument(i))}),g.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qe();const o=t.path,a=new E(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Ef(R0(l),r)<=0||(i.has(l.key)||zi(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return g.resolve(s)}getAllFromCollectionGroup(e,t,r,i){A()}Cs(e,t){return g.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XP(this)}getSize(e){return g.resolve(this.size)}}class XP extends jP{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),g.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class eR{constructor(e){this.persistence=e,this.xs=new Pt(t=>Mn(t),Gi),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ip,this.targetCount=0,this.Ms=qn.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),g.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qn(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,g.resolve()}updateTargetData(e,t){return this.Fn(t),g.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),g.waitFor(s).next(()=>i)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return g.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),g.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),g.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),g.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return g.resolve(r)}containsKey(e,t){return g.resolve(this.ks.containsKey(t))}}class sp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Qe(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new eR(this),this.indexManager=new VP,this.remoteDocumentCache=new JP(r=>this.referenceDelegate.Ls(r)),this.serializer=new XI(t),this.qs=new QP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new ZP(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){I("MemoryPersistence","Starting transaction:",e);const i=new tR(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return g.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class tR extends w2{constructor(e){super(),this.currentSequenceNumber=e}}class ta{constructor(e){this.persistence=e,this.Qs=new ip,this.js=null}static zs(e){return new ta(e)}get Ws(){if(this.js)return this.js;throw A()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),g.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),g.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Ws,r=>{const i=E.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,k.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return g.or([()=>g.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class up{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=F(),i=F();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new up(e,t.fromCache,r,i)}}class AT{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(dI(t))return g.resolve(null);let r=Ge(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=zo(t,null,"F"),r=Ge(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=F(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ji(t,a);return this.zi(t,u,o,c.readTime)?this.Ki(e,zo(t,null,"F")):this.Wi(e,u,t,c)}))})))}Gi(e,t,r,i){return dI(t)||i.isEqual(k.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(Tf()<=P.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ff(t)),this.Wi(e,o,t,function P0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=k.fromTimestamp(1e9===r?new te(t+1,0):new te(t,r));return new He(i,E.empty(),e)}(i,-1)))})}ji(e,t){let r=new Y(mI(e));return t.forEach((i,s)=>{zi(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return Tf()<=P.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Ff(t)),this.Ui.getDocumentsMatchingQuery(e,t,He.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class rR{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new K(R),this.Yi=new Pt(s=>Mn(s),Gi),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ST(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function kT(n,e){return lp.apply(this,arguments)}function lp(){return lp=p(function*(n,e){const t=S(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=F();for(const u of i){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}),lp.apply(this,arguments)}function DT(n){const e=S(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Dr(n,e,t){return hp.apply(this,arguments)}function hp(){return hp=p(function*(n,e,t){const r=S(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qt(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),hp.apply(this,arguments)}function ia(n,e,t){const r=S(n);let i=k.min(),s=F();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const l=S(a),d=l.Yi.get(u);return void 0!==d?g.resolve(l.Ji.get(d)):l.Bs.getTargetData(c,u)}(r,o,Ge(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:k.min(),t?s:F())).next(a=>(function NT(n,e,t){let r=n.Xi.get(e)||k.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function pI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:s})))}class gp{constructor(){this.activeTargetIds=function Uf(){return aP}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FT{constructor(){this.Hr=new gp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uR{Yr(e){}shutdown(){}}class UT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let aa=null;function yp(){return null===aa?aa=268435456+Math.round(2147483648*Math.random()):aa++,"0x"+aa.toString(16)}const lR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hR{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Fe="WebChannelConnection";class dR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=yp(),a=this.To(e,t);I("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const c={};return this.Eo(c,i,s),this.Ao(e,a,c,r).then(u=>(I("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw st("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${lR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=yp();return new Promise((o,a)=>{const c=new l2;c.setWithCredentials(!0),c.listenOnce(a2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case If.NO_ERROR:const l=c.getResponseJson();I(Fe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case If.TIMEOUT:I(Fe,`RPC '${e}' ${s} timed out`),a(new v(_.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const d=c.getStatus();if(I(Fe,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f?.error;if(m&&m.status&&m.message){const y=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(w)>=0?w:_.UNKNOWN}(m.status);a(new v(y,m.message))}else a(new v(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new v(_.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{I(Fe,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);I(Fe,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Ro(e,t,r){const i=yp(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=s2(),a=o2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new u2({})),this.Eo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const l=s.join("");I(Fe,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=o.createWebChannel(l,c);let f=!1,m=!1;const y=new hR({ro:w=>{m?I(Fe,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(I(Fe,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),I(Fe,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},oo:()=>d.close()}),T=(w,O,N)=>{w.listen(O,M=>{try{N(M)}catch(ae){setTimeout(()=>{throw ae},0)}})};return T(d,Co.EventType.OPEN,()=>{m||I(Fe,`RPC '${e}' stream ${i} transport opened.`)}),T(d,Co.EventType.CLOSE,()=>{m||(m=!0,I(Fe,`RPC '${e}' stream ${i} transport closed`),y.wo())}),T(d,Co.EventType.ERROR,w=>{m||(m=!0,st(Fe,`RPC '${e}' stream ${i} transport errored:`,w),y.wo(new v(_.UNAVAILABLE,"The operation could not be completed")))}),T(d,Co.EventType.MESSAGE,w=>{var O;if(!m){const N=w.data[0];C(!!N);const ae=N.error||(null===(O=N[0])||void 0===O?void 0:O.error);if(ae){I(Fe,`RPC '${e}' stream ${i} received error:`,ae);const ne=ae.status;let q=function(Lt){const jr=fe[Lt];if(void 0!==jr)return RI(jr)}(ne),Pe=ae.message;void 0===q&&(q=_.INTERNAL,Pe="Unknown error status: "+ne+" with message "+ae.message),m=!0,y.wo(new v(q,Pe)),d.close()}else I(Fe,`RPC '${e}' stream ${i} received:`,N),y._o(N)}}),T(a,c2.STAT_EVENT,w=>{w.stat===x0.PROXY?I(Fe,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===x0.NOPROXY&&I(Fe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function ca(){return typeof document<"u"?document:null}function as(n){return new TP(n,!0)}class vp{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fR{constructor(e,t,r,i,s,o,a,c){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new vp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return p(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return p(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return p(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(ce(t.toString()),ce("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===_.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new v(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(p(function*(){e.state=0,e.start()}))}tu(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pR extends fR{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function EP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:A(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(C(void 0===u||"string"==typeof u),_e.fromBase64String(u||"")):(C(void 0===u||u instanceof Uint8Array),_e.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?_.UNKNOWN:RI(c.code);return new v(u,c.message||"")}(o);t=new UI(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=_t(n,r.document.name),s=le(r.document.updateTime),o=r.document.createTime?le(r.document.createTime):k.min(),a=new De({mapValue:{fields:r.document.fields}}),c=Z.newFoundDocument(i,s,o,a);t=new Wo(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=_t(n,r.document),s=r.readTime?le(r.readTime):k.min(),o=Z.newNoDocument(i,s);t=new Wo([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=_t(n,r.document);t=new Wo([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return A();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new mP(i,s);t=new FI(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return k.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?k.min():s.readTime?le(s.readTime):k.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Zi(this.serializer),t.addTarget=function(i,s){let o;const a=s.target;if(o=Vo(a)?{documents:HI(i,a)}:{query:Yf(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=function zI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(i,s.resumeToken);const c=Wf(i,s.expectedCount);null!==c&&(o.expectedCount=c)}else if(s.snapshotVersion.compareTo(k.min())>0){o.readTime=function Sr(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(i,s.snapshotVersion.toTimestamp());const c=Wf(i,s.expectedCount);null!==c&&(o.expectedCount=c)}return o}(this.serializer,e);const r=function xP(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Zi(this.serializer),t.removeTarget=e,this.Wo(t)}}class gR extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new v(_.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new v(_.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new v(_.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class yR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ce(t),this.mu=!1):I("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class vR{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(p(function*(){var c;an(o)&&(I("RemoteStore","Restarting streams for network reachability change."),yield(c=p(function*(u){const l=S(u);l.vu.add(4),yield Or(l),l.bu.set("Unknown"),l.vu.delete(4),yield cs(l)}),function(u){return c.apply(this,arguments)})(o))}))}),this.bu=new yR(r,i)}}function cs(n){return Tp.apply(this,arguments)}function Tp(){return Tp=p(function*(n){if(an(n))for(const e of n.Ru)yield e(!0)}),Tp.apply(this,arguments)}function Or(n){return wp.apply(this,arguments)}function wp(){return wp=p(function*(n){for(const e of n.Ru)yield e(!1)}),wp.apply(this,arguments)}function ua(n,e){const t=S(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Sp(t)?Ep(t):Rr(t).Ko()&&bp(t,e))}function us(n,e){const t=S(n),r=Rr(t);t.Au.delete(e),r.Ko()&&GT(t,e),0===t.Au.size&&(r.Ko()?r.jo():an(t)&&t.bu.set("Unknown"))}function bp(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(k.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rr(n).su(e)}function GT(n,e){n.Vu.qt(e),Rr(n).iu(e)}function Ep(n){n.Vu=new _P({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Rr(n).start(),n.bu.gu()}function Sp(n){return an(n)&&!Rr(n).Uo()&&n.Au.size>0}function an(n){return 0===S(n).vu.size}function BT(n){n.Vu=void 0}function IR(n){return xp.apply(this,arguments)}function xp(){return xp=p(function*(n){n.Au.forEach((e,t)=>{bp(n,e)})}),xp.apply(this,arguments)}function TR(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=p(function*(n,e){BT(n),Sp(n)?(n.bu.Iu(e),Ep(n)):n.bu.set("Unknown")}),Ap.apply(this,arguments)}function wR(n,e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=p(function*(n,e,t){if(n.bu.set("Online"),e instanceof UI&&2===e.state&&e.cause)try{yield(r=p(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield la(n,r)}else if(e instanceof Wo?n.Vu.Ht(e):e instanceof FI?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(k.min()))try{const r=yield DT(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(c);u&&i.Au.set(c,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,c)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(_e.EMPTY_BYTE_STRING,u.snapshotVersion)),GT(i,a);const l=new Nt(u.target,a,c,u.sequenceNumber);bp(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield la(n,r)}var r}),Cp.apply(this,arguments)}function la(n,e,t){return kp.apply(this,arguments)}function kp(){return kp=p(function*(n,e,t){if(!Qt(e))throw e;n.vu.add(1),yield Or(n),n.bu.set("Offline"),t||(t=()=>DT(n.localStore)),n.asyncQueue.enqueueRetryable(p(function*(){I("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield cs(n)}))}),kp.apply(this,arguments)}function jT(n,e){return Mp.apply(this,arguments)}function Mp(){return Mp=p(function*(n,e){const t=S(n);t.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=an(t);t.vu.add(3),yield Or(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield cs(t)}),Mp.apply(this,arguments)}function Fp(){return Fp=p(function*(n,e){const t=S(n);e?(t.vu.delete(2),yield cs(t)):e||(t.vu.add(2),yield Or(t),t.bu.set("Unknown"))}),Fp.apply(this,arguments)}function Rr(n){return n.Su||(n.Su=function(e,t,r){const i=S(e);return i.fu(),new pR(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:IR.bind(null,n),ao:TR.bind(null,n),nu:wR.bind(null,n)}),n.Ru.push(function(){var e=p(function*(t){t?(n.Su.Qo(),Sp(n)?Ep(n):n.bu.set("Unknown")):(yield n.Su.stop(),BT(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}class Up{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ge,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Up(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new v(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nr(n,e){if(ce("AsyncQueue",`${e}: ${n}`),Qt(n))return new v(_.UNAVAILABLE,`${e}: ${n}`);throw n}class Mr{constructor(e){this.comparator=e?(t,r)=>e(t,r)||E.comparator(t.key,r.key):(t,r)=>E.comparator(t.key,r.key),this.keyedMap=$i(),this.sortedSet=new K(this.comparator)}static emptySet(e){return new Mr(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Mr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WT{constructor(){this.Cu=new K(E.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):A():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lr{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Lr(e,t,Mr.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kR{constructor(){this.Nu=void 0,this.listeners=[]}}class DR{constructor(){this.queries=new Pt(e=>fI(e),Bi),this.onlineState="Unknown",this.ku=new Set}}function Gp(){return Gp=p(function*(n,e){const t=S(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new kR),i)try{s.Nu=yield t.onListen(r)}catch(o){const a=Nr(o,`Initialization of query '${Ff(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&$p(t)}),Gp.apply(this,arguments)}function zp(){return zp=p(function*(n,e){const t=S(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),zp.apply(this,arguments)}function OR(n,e){const t=S(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&$p(t)}function PR(n,e,t){const r=S(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function $p(n){n.ku.forEach(e=>{e.next()})}class qp{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Lr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Lr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class QT{constructor(e){this.key=e}}class YT{constructor(e){this.key=e}}class ZT{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=F(),this.mutatedKeys=F(),this.tc=mI(e),this.ec=new Mr(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new WT,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const f=i.get(l),m=zi(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?y!==T&&(r.track({type:3,doc:m}),w=!0):this.rc(f,m)||(r.track({type:2,doc:m}),w=!0,(c&&this.tc(m,c)>0||u&&this.tc(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),w=!0):f&&!m&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(m?(o=o.add(m),s=T?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,l)=>function(d,f){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return m(d)-m(f)}(u.type,l.type)||this.tc(u.doc,l.doc)),this.oc(r);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,c=a!==this.Xu;return this.Xu=a,0!==s.length||c?{snapshot:new Lr(this.query,e.ec,i,s,e.mutatedKeys,0===a,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new WT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=F(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new YT(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new QT(r))}),t}hc(e){this.Yu=e.ir,this.Zu=F();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Lr.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class MR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LR{constructor(e){this.key=e,this.fc=!1}}class FR{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Pt(a=>fI(a),Bi),this._c=new Map,this.mc=new Set,this.gc=new K(E.comparator),this.yc=new Map,this.Ic=new ip,this.Tc={},this.Ec=new Map,this.Ac=qn.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function UR(n,e){return jp.apply(this,arguments)}function jp(){return jp=p(function*(n,e){const t=function pm(n){const e=S(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BR.bind(null,e),e.dc.nu=OR.bind(null,e.eventManager),e.dc.Pc=PR.bind(null,e.eventManager),e}(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function kr(n,e){const t=S(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,g.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new Nt(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Ge(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function Wp(n,e,t,r,i){return Kp.apply(this,arguments)}(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&ua(t.remoteStore,o)}return i}),jp.apply(this,arguments)}function Kp(){return Kp=p(function*(n,e,t,r,i){n.Rc=(d,f,m)=>{return(y=p(function*(T,w,O,N){let M=w.view.sc(O);M.zi&&(M=yield ia(T.localStore,w.query,!1).then(({documents:q})=>w.view.sc(q,M)));const ae=N&&N.targetChanges.get(w.targetId),ne=w.view.applyChanges(M,T.isPrimaryClient,ae);return rm(T,w.targetId,ne.cc),ne.snapshot}),function(T,w,O,N){return y.apply(this,arguments)})(n,d,f,m);var y};const s=yield ia(n.localStore,e,!0),o=new ZT(e,s.ir),a=o.sc(s.documents),c=Qi.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);rm(n,t,u.cc);const l=new MR(e,t,o);return n.wc.set(e,l),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),u.snapshot}),Kp.apply(this,arguments)}function VR(n,e){return Hp.apply(this,arguments)}function Hp(){return Hp=p(function*(n,e){const t=S(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!Bi(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dr(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),us(t.remoteStore,r.targetId),Fr(t,r.targetId)}).catch(Ht))):(Fr(t,r.targetId),yield Dr(t.localStore,r.targetId,!0))}),Hp.apply(this,arguments)}function JT(n,e){return Yp.apply(this,arguments)}function Yp(){return Yp=p(function*(n,e){const t=S(n);try{const r=yield function sR(n,e){const t=S(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const f=i.get(d);if(!f)return;a.push(t.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(s,l.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);var y,T,w;null!==e.targetMismatches.get(d)?m=m.withResumeToken(_e.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):l.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(l.resumeToken,r)),i=i.insert(d,m),T=m,w=l,(0===(y=f).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(s,m))});let c=qe(),u=F();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function OT(n,e,t){let r=F(),i=F();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=qe();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(k.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{c=l.nr,u=l.sr})),!r.isEqual(k.min())){const l=t.Bs.getLastRemoteSnapshotVersion(s).next(d=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return g.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(C(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?C(o.fc):i.removedDocuments.size>0&&(C(o.fc),o.fc=!1))}),yield Mt(t,r,e)}catch(r){yield Ht(r)}}),Yp.apply(this,arguments)}function XT(n,e,t){const r=S(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=S(s);a.onlineState=o;let c=!1;a.queries.forEach((u,l)=>{for(const d of l.listeners)d.Mu(o)&&(c=!0)}),c&&$p(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BR(n,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=p(function*(n,e,t){const r=S(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new K(E.comparator);o=o.insert(s,Z.newNoDocument(s,k.min()));const a=F().add(s),c=new Hi(k.min(),new Map,new K(R),o,a);yield JT(r,c),r.gc=r.gc.remove(s),r.yc.delete(e),im(r)}else yield Dr(r.localStore,e,!1).then(()=>Fr(r,e,t)).catch(Ht)}),Zp.apply(this,arguments)}function Fr(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||ew(n,r)})}function ew(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(us(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),im(n))}function rm(n,e,t){for(const r of t)r instanceof QT?(n.Ic.addReference(r.key,e),jR(n,r)):r instanceof YT?(I("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||ew(n,r.key)):A()}function jR(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(I("SyncEngine","New document in limbo: "+t),n.mc.add(r),im(n))}function im(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new E(G.fromString(e)),r=n.Ac.next();n.yc.set(r,new LR(t)),n.gc=n.gc.insert(t,r),ua(n.remoteStore,new Nt(Ge(Ir(t.path)),r,"TargetPurposeLimboResolution",Qe.ct))}}function Mt(n,e,t){return sm.apply(this,arguments)}function sm(){return sm=p(function*(n,e,t){const r=S(n),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,c)=>{o.push(r.Rc(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const l=up.Li(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=p(function*(c,u){const l=S(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(u,f=>g.forEach(f.Fi,m=>l.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>g.forEach(f.Bi,m=>l.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Qt(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=l.Ji.get(f),T=m.withLastLimboFreeSnapshotVersion(m.snapshotVersion);l.Ji=l.Ji.insert(f,T)}}}),function(c,u){return a.apply(this,arguments)})(r.localStore,s))}),sm.apply(this,arguments)}function WR(n,e){return om.apply(this,arguments)}function om(){return om=p(function*(n,e){const t=S(n);if(!t.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const r=yield kT(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new v(_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mt(t,r.er)}var i}),om.apply(this,arguments)}function KR(n,e){const t=S(n),r=t.yc.get(e);if(r&&r.fc)return F().add(r.key);{let i=F();const s=t._c.get(e);if(!s)return i;for(const o of s){const a=t.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class ha{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return p(function*(){t.serializer=as(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function CT(n,e,t,r){return new rR(n,e,t,r)}(this.persistence,new AT,e.initialUser,this.serializer)}createPersistence(e){return new sp(ta.zs,this.serializer)}createSharedClientState(e){return new FT}terminate(){var e=this;return p(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ur{initialize(e,t){var r=this;return p(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>XT(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=WR.bind(null,r.syncEngine),yield function Lp(n,e){return Fp.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DR}createDatastore(e){const t=as(e.databaseInfo.databaseId),r=new dR(e.databaseInfo);return new gR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>XT(this.syncEngine,a,0),o=UT.D()?new UT:new uR,new vR(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,c,u){const l=new FR(r,i,s,o,a,c);return u&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=p(function*(t){const r=S(t);I("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Or(r),r.Pu.shutdown(),r.bu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}class da{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ce("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class oN{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=we.UNAUTHENTICATED,this.clientId=D0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=p(function*(a){I("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return p(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new v(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ge;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(p(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Nr(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function fa(n,e){return gm.apply(this,arguments)}function gm(){return gm=p(function*(n,e){n.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=p(function*(s){r.isEqual(s)||(yield kT(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),gm.apply(this,arguments)}function _m(n,e){return ym.apply(this,arguments)}function ym(){return ym=p(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function vm(n){return Im.apply(this,arguments)}(n);I("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>jT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>jT(e.remoteStore,s)),n._onlineComponents=e}),ym.apply(this,arguments)}function Im(){return Im=p(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fa(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function ow(n){return"FirebaseError"===n.name?n.code===_.FAILED_PRECONDITION||n.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;st("Error using user provided cache. Falling back to memory cache: "+t),yield fa(n,new ha)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield fa(n,new ha);return n._offlineComponents}),Im.apply(this,arguments)}function Tm(){return Tm=p(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield _m(n,n._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield _m(n,new Ur))),n._onlineComponents}),Tm.apply(this,arguments)}function Vr(n){return bm.apply(this,arguments)}function bm(){return bm=p(function*(n){const e=yield function pa(n){return Tm.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=UR.bind(null,e.syncEngine),t.onUnlisten=VR.bind(null,e.syncEngine),t}),bm.apply(this,arguments)}function dw(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const fw=new Map;function mw(n){if(E.isDocumentKey(n))throw new v(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function V(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new v(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function ga(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":A()}(n);throw new v(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class _w{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new v(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new v(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function mN(n,e,t,r){if(!0===e&&!0===r)throw new v(_.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=dw(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new v(_.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new v(_.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new v(_.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ls{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _w({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new v(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new v(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _w(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new d2;switch(t.type){case"firstParty":return new g2(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new v(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fw.get(e);t&&(I("ComponentProvider","Removing Datastore"),fw.delete(e),t.terminate())}(this),Promise.resolve()}}class he{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new he(this.firestore,e,this._key)}}class Oe{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oe(this.firestore,e,this._query)}}class yt extends Oe{constructor(e,t,r){super(e,t,Ir(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new he(this.firestore,null,new E(e))}withConverter(e){return new yt(this.firestore,e,this._path)}}function _N(n,e,...t){if(n=Ut(n),function Em(n,e,t){if(!t)throw new v(_.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("collection","path",e),n instanceof ls){const r=G.fromString(e,...t);return mw(r),new yt(n,null,r)}{if(!(n instanceof he||n instanceof yt))throw new v(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(G.fromString(e,...t));return mw(r),new yt(n.firestore,null,r)}}class vN{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new vp(this,"async_queue_retry"),this.Xc=()=>{const t=ca();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=ca();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ca();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ge;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return p(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qt(t))throw t;I("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ce("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Up.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&A()}verifyOperationInProgress(){}sa(){var e=this;return p(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Sm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class J extends ls{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vN,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vw(this),this._firestoreClient.terminate()}}function TN(n,e){const r="string"==typeof n?n:e||"(default)",i=function hg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}("object"==typeof n?n:Wa(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=ys())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("firestore");s&&function gN(n,e,t,r={}){var i;const s=(n=V(n,ls))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&st("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=we.MOCK_USER;else{a=function f1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yn(JSON.stringify({alg:"none",type:"JWT"})),Yn(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new v(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new we(u)}n._authCredentials=new f2(new C0(a,c))}}(i,...s)}return i}function vw(n){var e,t,r;const i=n._freezeSettings(),s=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new W2(n._databaseId,a,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,dw(u.experimentalLongPollingOptions),u.useFetchStreams));var a,u;n._firestoreClient=new oN(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(_e.fromBase64String(e))}catch(t){throw new v(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(_e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gr{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new v(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new v(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new v(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}}const kN=new RegExp("[~\\*/\\[\\]]");function va(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new v(_.INVALID_ARGUMENT,a+n+c)}class Dm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ia("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DN extends Dm{data(){return super.data()}}function Ia(n,e){return"string"==typeof e?function ya(n,e,t){if(e.search(kN)>=0)throw va(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gr(...e.split("."))._internalPath}catch{throw va(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof Gr?e._internalPath:e._delegate._internalPath}class PN{convertValue(e,t="none"){switch(Xt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw A()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yt(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new xm(oe(e.latitude),oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Mo(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const t=Zt(e);return new te(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=G.fromString(e);C(JI(r));const i=new Rn(r.get(1),r.get(3)),s=new E(r.popFirst(5));return i.isEqual(t)||ce(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Hn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends Dm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ia("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ea extends $r{data(e={}){return super.data(e)}}class qr{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ea(this._firestore,this._userDataWriter,r.key,r,new Hn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new v(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Ea(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hn(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Ea(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hn(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==o.type&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:NN(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}class un extends PN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,t)}}!function(n,e=!0){pr=bs,Jn(new me("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new J(new p2(t.getProvider("auth-internal")),new _2(t.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new v(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rn(a.options.projectId,c)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ze(A0,"3.13.0",n),Ze(A0,"3.13.0","esm2017")}();var Gw=j(4004),KN={includeMetadataChanges:!1};function Nm(n,e){return void 0===e&&(e=KN),new Wu.y(function(t){var r=function MN(n,...e){var t,r,i;n=Ut(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Sm(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Sm(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let c,u,l;if(n instanceof he)u=V(n.firestore,J),l=Ir(n._key.path),c={next:d=>{e[o]&&e[o](function Rm(n,e,t){const r=t.docs.get(e._key),i=new un(n);return new $r(n,i,e._key,r,new Hn(t.hasPendingWrites,t.fromCache),e.converter)}(u,n,d))},error:e[o+1],complete:e[o+2]};else{const d=V(n,Oe);u=V(d.firestore,J),l=d._query;const f=new un(u);c={next:m=>{e[o]&&e[o](new qr(u,f,d,m))},error:e[o+1],complete:e[o+2]},function Pw(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new v(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(d,f,m,y){const T=new da(y),w=new qp(f,T,m);return d.asyncQueue.enqueueAndForget(p(function*(){return function Vp(n,e){return Gp.apply(this,arguments)}(yield Vr(d),w)})),()=>{T.Dc(),d.asyncQueue.enqueueAndForget(p(function*(){return function Bp(n,e){return zp.apply(this,arguments)}(yield Vr(d),w)}))}}(function pe(n){return n._firestoreClient||vw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}(u),l,a,c)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function eM(n,e){return void 0===e&&(e={}),function XN(n){return Nm(n,{includeMetadataChanges:!0}).pipe((0,Gw.U)(function(e){return e.docs}))}(n).pipe((0,Gw.U)(function(t){return t.map(function(r){return function Bw(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class xa{constructor(e){return e}}const jw="firestore",Fm=new h.OlP("angularfire2.firestore-instances");function rM(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xa(r)}}const iM={provide:class tM{constructor(){return nl(jw)}},deps:[[new h.FiY,Fm]]},sM={provide:xa,useFactory:function nM(n,e){const t=function tl(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(jw,n,e);return t&&new xa(t)},deps:[[new h.FiY,Fm],nr]};let oM=(()=>{class n{constructor(){Ze("angularfire",Ku.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[sM,iM]}),n})();function aM(n,...e){return{ngModule:oM,providers:[{provide:Fm,useFactory:rM(n),multi:!0,deps:[h.R0b,h.zs3,P_,R_,[new h.FiY,By],[new h.FiY,uv],...e]}]}}const cM=Yr(eM,!0),uM=Yr(_N,!0),lM=Yr(TN,!0),hM=new h.OlP("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var dM=j(7579);let fM=(()=>{class n{constructor(t,r,i){this.ngZone=t,this.document=r,this.window=i,this.copySubject=new dM.x,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});const r=this.copyFromContent(t);return this.pushCopyResponse(r?{content:t,isSuccess:r}:{isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,r=!0){try{this.selectTarget(t);const i=this.copyText();return this.clearSelection(r?t:void 0,this.window),i&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){const t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,r=this.document.body){if(this.tempTextArea&&!r.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{r.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;const i=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),i}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,r){t&&t.focus(),r.getSelection()?.removeAllRanges()}createTempTextArea(t,r){const i="rtl"===t.documentElement.getAttribute("dir");let s;return s=t.createElement("textarea"),s.style.fontSize="12pt",s.style.border="0",s.style.padding="0",s.style.margin="0",s.style.position="absolute",s.style[i?"right":"left"]="-9999px",s.style.top=(r.pageYOffset||t.documentElement.scrollTop)+"px",s.setAttribute("readonly",""),s}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(W.K0),h.LFG(hM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[W.ez]}),n})();var D=j(1180),gs=j(7423),Um=j(568),Ye=j(1591),Aa=j(7594);let Vm=(()=>{var n;class e extends Aa.s{}return n=e,(0,D.Z)(e,"\u0275fac",function(){let t;return function(i){return(t||(t=h.n5z(n)))(i||n)}}()),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["CheckIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(r,i){1&r&&(h.O4$(),h.TgZ(0,"svg",0),h._UZ(1,"path",1),h.qZA()),2&r&&(h.Tol(i.getClassNames()),h.uIk("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})),e})(),Gm=(()=>{var n;class e extends Aa.s{}return n=e,(0,D.Z)(e,"\u0275fac",function(){let t;return function(i){return(t||(t=h.n5z(n)))(i||n)}}()),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["InfoCircleIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_408_21102)"],["fill-rule","evenodd","clip-rule","evenodd","d","M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z","fill","currentColor"],["id","clip0_408_21102"],["width","14","height","14","fill","white"]],template:function(r,i){1&r&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g",1),h._UZ(2,"path",2),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",3),h._UZ(5,"rect",4),h.qZA()()()),2&r&&(h.Tol(i.getClassNames()),h.uIk("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})),e})(),Bm=(()=>{var n;class e extends Aa.s{}return n=e,(0,D.Z)(e,"\u0275fac",function(){let t;return function(i){return(t||(t=h.n5z(n)))(i||n)}}()),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["TimesCircleIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_334_13179)"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],["id","clip0_334_13179"],["width","14","height","14","fill","white"]],template:function(r,i){1&r&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g",1),h._UZ(2,"path",2),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",3),h._UZ(5,"rect",4),h.qZA()()()),2&r&&(h.Tol(i.getClassNames()),h.uIk("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})),e})(),zm=(()=>{var n;class e extends Aa.s{}return n=e,(0,D.Z)(e,"\u0275fac",function(){let t;return function(i){return(t||(t=h.n5z(n)))(i||n)}}()),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["ExclamationTriangleIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:8,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_323_12417)"],["d","M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z","fill","currentColor"],["d","M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z","fill","currentColor"],["d","M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z","fill","currentColor"],["id","clip0_323_12417"],["width","14","height","14","fill","white"]],template:function(r,i){1&r&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g",1),h._UZ(2,"path",2)(3,"path",3)(4,"path",4),h.qZA(),h.TgZ(5,"defs")(6,"clipPath",5),h._UZ(7,"rect",6),h.qZA()()()),2&r&&(h.Tol(i.getClassNames()),h.uIk("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})),e})();var $m=j(2132);const Ww=["container"];function mM(n,e){if(1&n&&h._UZ(0,"span"),2&n){const t=h.oxw(2);h.Tol("p-toast-message-icon pi "+t.message.icon)}}function gM(n,e){1&n&&h._UZ(0,"CheckIcon")}function _M(n,e){1&n&&h._UZ(0,"InfoCircleIcon")}function yM(n,e){1&n&&h._UZ(0,"TimesCircleIcon")}function vM(n,e){1&n&&h._UZ(0,"ExclamationTriangleIcon")}function IM(n,e){if(1&n&&(h.TgZ(0,"span",11),h.ynx(1),h.YNc(2,gM,1,0,"CheckIcon",3),h.YNc(3,_M,1,0,"InfoCircleIcon",3),h.YNc(4,yM,1,0,"TimesCircleIcon",3),h.YNc(5,vM,1,0,"ExclamationTriangleIcon",3),h.BQk(),h.qZA()),2&n){const t=h.oxw(2);h.xp6(2),h.Q6J("ngIf","success"===t.message.severity),h.xp6(1),h.Q6J("ngIf","info"===t.message.severity),h.xp6(1),h.Q6J("ngIf","error"===t.message.severity),h.xp6(1),h.Q6J("ngIf","warn"===t.message.severity)}}function TM(n,e){if(1&n&&(h.ynx(0),h.YNc(1,mM,1,2,"span",6),h.YNc(2,IM,6,4,"span",7),h.TgZ(3,"div",8)(4,"div",9),h._uU(5),h.qZA(),h.TgZ(6,"div",10),h._uU(7),h.qZA()(),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.message.icon),h.xp6(1),h.Q6J("ngIf",!t.message.icon),h.xp6(3),h.Oqu(t.message.summary),h.xp6(2),h.Oqu(t.message.detail)}}function wM(n,e){1&n&&h.GkF(0)}function bM(n,e){if(1&n&&h._UZ(0,"span"),2&n){const t=h.oxw(2);h.Tol("p-toast-message-icon pi "+t.message.closeIcon)}}function EM(n,e){1&n&&h._UZ(0,"TimesIcon",14),2&n&&h.Q6J("styleClass","p-toast-icon-close-icon")}function SM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",12),h.NdJ("click",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onCloseIconClick(i))})("keydown.enter",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onCloseIconClick(i))}),h.YNc(1,bM,1,2,"span",6),h.YNc(2,EM,1,1,"TimesIcon",13),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.message.closeIcon),h.xp6(1),h.Q6J("ngIf",!t.message.closeIcon)}}const xM=function(n){return[n,"p-toast-message"]},AM=function(n,e,t,r){return{showTransformParams:n,hideTransformParams:e,showTransitionParams:t,hideTransitionParams:r}},CM=function(n){return{value:"visible",params:n}},kM=function(n){return{$implicit:n}};function DM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"p-toastItem",3),h.NdJ("onClose",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onMessageClose(i))})("@toastAnimation.start",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onAnimationStart(i))})("@toastAnimation.done",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onAnimationEnd(i))}),h.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=h.oxw();h.Q6J("message",t)("index",r)("template",i.template)("@toastAnimation",void 0)("showTransformOptions",i.showTransformOptions)("hideTransformOptions",i.hideTransformOptions)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}}let OM=(()=>{var n;class e{constructor(r){(0,D.Z)(this,"zone",void 0),(0,D.Z)(this,"message",void 0),(0,D.Z)(this,"index",void 0),(0,D.Z)(this,"template",void 0),(0,D.Z)(this,"showTransformOptions",void 0),(0,D.Z)(this,"hideTransformOptions",void 0),(0,D.Z)(this,"showTransitionOptions",void 0),(0,D.Z)(this,"hideTransitionOptions",void 0),(0,D.Z)(this,"onClose",new h.vpe),(0,D.Z)(this,"containerViewChild",void 0),(0,D.Z)(this,"timeout",void 0),this.zone=r}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(r){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),r.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return n=e,(0,D.Z)(e,"\u0275fac",function(r){return new(r||n)(h.Y36(h.R0b))}),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["p-toastItem"]],viewQuery:function(r,i){if(1&r&&h.Gf(Ww,5),2&r){let s;h.iGM(s=h.CRH())&&(i.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"class",4,"ngIf"],["class","p-toast-message-icon",4,"ngIf"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],[1,"p-toast-message-icon"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0,1),h.NdJ("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),h.TgZ(2,"div",2),h.YNc(3,TM,8,4,"ng-container",3),h.YNc(4,wM,1,0,"ng-container",4),h.YNc(5,SM,3,2,"button",5),h.qZA()()),2&r&&(h.Tol(i.message.styleClass),h.Q6J("ngClass",h.VKq(10,xM,"p-toast-message-"+i.message.severity))("@messageState",h.VKq(17,CM,h.l5B(12,AM,i.showTransformOptions,i.hideTransformOptions,i.showTransitionOptions,i.hideTransitionOptions))),h.uIk("id",i.message.id),h.xp6(2),h.Q6J("ngClass",i.message.contentStyleClass),h.xp6(1),h.Q6J("ngIf",!i.template),h.xp6(1),h.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",h.VKq(19,kM,i.message)),h.xp6(1),h.Q6J("ngIf",!1!==i.message.closable))},dependencies:function(){return[W.mk,W.O5,W.tP,Um.H,Vm,Gm,Bm,zm,$m.q]},encapsulation:2,data:{animation:[(0,Ye.X$)("messageState",[(0,Ye.SB)("visible",(0,Ye.oB)({transform:"translateY(0)",opacity:1})),(0,Ye.eR)("void => *",[(0,Ye.oB)({transform:"{{showTransformParams}}",opacity:0}),(0,Ye.jt)("{{showTransitionParams}}")]),(0,Ye.eR)("* => void",[(0,Ye.jt)("{{hideTransitionParams}}",(0,Ye.oB)({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0})),e})(),PM=(()=>{var n;class e{constructor(r,i,s,o,a){(0,D.Z)(this,"document",void 0),(0,D.Z)(this,"renderer",void 0),(0,D.Z)(this,"messageService",void 0),(0,D.Z)(this,"cd",void 0),(0,D.Z)(this,"config",void 0),(0,D.Z)(this,"key",void 0),(0,D.Z)(this,"autoZIndex",!0),(0,D.Z)(this,"baseZIndex",0),(0,D.Z)(this,"style",void 0),(0,D.Z)(this,"styleClass",void 0),(0,D.Z)(this,"position","top-right"),(0,D.Z)(this,"preventOpenDuplicates",!1),(0,D.Z)(this,"preventDuplicates",!1),(0,D.Z)(this,"showTransformOptions","translateY(100%)"),(0,D.Z)(this,"hideTransformOptions","translateY(-100%)"),(0,D.Z)(this,"showTransitionOptions","300ms ease-out"),(0,D.Z)(this,"hideTransitionOptions","250ms ease-in"),(0,D.Z)(this,"breakpoints",void 0),(0,D.Z)(this,"onClose",new h.vpe),(0,D.Z)(this,"containerViewChild",void 0),(0,D.Z)(this,"templates",void 0),(0,D.Z)(this,"messageSubscription",void 0),(0,D.Z)(this,"clearSubscription",void 0),(0,D.Z)(this,"messages",void 0),(0,D.Z)(this,"messagesArchieve",void 0),(0,D.Z)(this,"template",void 0),(0,D.Z)(this,"styleElement",void 0),(0,D.Z)(this,"id",(0,gs.Th)()),this.document=r,this.renderer=i,this.messageService=s,this.cd=o,this.config=a}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(r=>{if(r)if(Array.isArray(r)){const i=r.filter(s=>this.canAdd(s));this.add(i)}else this.canAdd(r)&&this.add([r])}),this.clearSubscription=this.messageService.clearObserver.subscribe(r=>{r?this.key===r&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(r){this.messages=this.messages?[...this.messages,...r]:[...r],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...r]:[...r]),this.cd.markForCheck()}canAdd(r){let i=this.key===r.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,r)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,r)),i}containsMessage(r,i){return!!r&&null!=r.find(s=>s.summary===i.summary&&s.detail==i.detail&&s.severity===i.severity)}ngAfterContentInit(){this.templates.forEach(r=>{r.getType(),this.template=r.template})}onMessageClose(r){this.messages.splice(r.index,1),this.onClose.emit({message:r.message}),this.cd.detectChanges()}onAnimationStart(r){"void"===r.fromState&&(this.renderer.setAttribute(this.containerViewChild.nativeElement,this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&gs.P9.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(r){"void"===r.toState&&this.autoZIndex&&gs.gb.isEmpty(this.messages)&&gs.P9.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",this.renderer.appendChild(this.document.head,this.styleElement);let r="";for(let i in this.breakpoints){let s="";for(let o in this.breakpoints[i])s+=o+":"+this.breakpoints[i][o]+" !important;";r+=`\n                    @media screen and (max-width: ${i}) {\n                        .p-toast[${this.id}] {\n                           ${s}\n                        }\n                    }\n                `}this.renderer.setProperty(this.styleElement,"innerHTML",r)}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&gs.P9.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return n=e,(0,D.Z)(e,"\u0275fac",function(r){return new(r||n)(h.Y36(W.K0),h.Y36(h.Qsj),h.Y36(Qn.ez),h.Y36(h.sBO),h.Y36(Qn.b4))}),(0,D.Z)(e,"\u0275cmp",h.Xpm({type:n,selectors:[["p-toast"]],contentQueries:function(r,i,s){if(1&r&&h.Suo(s,Qn.jx,4),2&r){let o;h.iGM(o=h.CRH())&&(i.templates=o)}},viewQuery:function(r,i){if(1&r&&h.Gf(Ww,5),2&r){let s;h.iGM(s=h.CRH())&&(i.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0,1),h.YNc(2,DM,1,8,"p-toastItem",2),h.qZA()),2&r&&(h.Tol(i.styleClass),h.Q6J("ngClass","p-toast p-component p-toast-"+i.position)("ngStyle",i.style),h.xp6(2),h.Q6J("ngForOf",i.messages))},dependencies:[W.mk,W.sg,W.PC,OM],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[(0,Ye.X$)("toastAnimation",[(0,Ye.eR)(":enter, :leave",[(0,Ye.IO)("@*",(0,Ye.pV)())])])]},changeDetection:0})),e})(),RM=(()=>{var n;class e{}return n=e,(0,D.Z)(e,"\u0275fac",function(r){return new(r||n)}),(0,D.Z)(e,"\u0275mod",h.oAB({type:n})),(0,D.Z)(e,"\u0275inj",h.cJS({imports:[W.ez,Um.T,Vm,Gm,Bm,zm,$m.q,Qn.m8]})),e})();var Ca=j(5829);function NM(n,e){if(1&n&&(h.TgZ(0,"div")(1,"span",6),h._uU(2),h.qZA()()),2&n){const t=h.oxw();h.xp6(2),h.hij(" ",t.stageLevel.value," ")}}function MM(n,e){if(1&n&&h._uU(0),2&n){const t=h.oxw();h.hij(" ",t.stageLevel.value," ")}}function LM(n,e){1&n&&(h.TgZ(0,"span",9),h._UZ(1,"i",10),h.qZA())}function FM(n,e){if(1&n&&(h.TgZ(0,"div",7),h.YNc(1,LM,2,0,"span",8),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.stars)}}function UM(n,e){1&n&&(h.TgZ(0,"span",12),h._UZ(1,"i",10),h.qZA())}function VM(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,UM,2,0,"span",11),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngForOf",t.stars)}}function GM(n,e){1&n&&(h.TgZ(0,"span",14),h._UZ(1,"i",15),h.qZA())}function BM(n,e){if(1&n&&h.YNc(0,GM,2,0,"span",13),2&n){const t=h.oxw(2);h.Q6J("ngForOf",t.stars)}}function zM(n,e){if(1&n&&(h.TgZ(0,"div",7),h.YNc(1,VM,2,1,"div",2),h.YNc(2,BM,1,1,"ng-template",null,3,h.W1O),h.qZA()),2&n){const t=h.MAs(3),r=h.oxw();h.xp6(1),h.Q6J("ngIf",r.stageLevel.completed)("ngIfElse",t)}}const $M=function(n,e){return{"stage-level-number-unselected":n,"stage-level-number-selected":e}};let qM=(()=>{var n;class e{constructor(){this.stars=new Array(1,2,3)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-stage-level"]],inputs:{stageLevel:"stageLevel"},decls:9,vars:8,consts:[[1,"stage-level-layout"],[2,"text-align","center",3,"ngClass"],[4,"ngIf","ngIfElse"],["NOT_COMPLETED",""],["style","display: flex; justify-content: center;",4,"ngIf","ngIfElse"],["STAGE_LEVEL_NOT_SELECTED",""],[1,"stage-level-completed-value"],[2,"display","flex","justify-content","center"],["class","stage-level-asterisk-selected",4,"ngFor","ngForOf"],[1,"stage-level-asterisk-selected"],[1,"pi","pi-star-fill",2,"font-size","10px"],["class","stage-level-asterisk-unselected stage-level-completed",4,"ngFor","ngForOf"],[1,"stage-level-asterisk-unselected","stage-level-completed"],["class","stage-level-asterisk-unselected",4,"ngFor","ngForOf"],[1,"stage-level-asterisk-unselected"],[1,"pi","pi-star",2,"font-size","10px"]],template:function(r,i){if(1&r&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,NM,3,1,"div",2),h.YNc(3,MM,1,1,"ng-template",null,3,h.W1O),h.qZA(),h.TgZ(5,"div"),h.YNc(6,FM,2,1,"div",4),h.YNc(7,zM,4,2,"ng-template",null,5,h.W1O),h.qZA()()),2&r){const s=h.MAs(4),o=h.MAs(8);h.xp6(1),h.Q6J("ngClass",h.WLB(5,$M,!i.stageLevel.selected,i.stageLevel.selected)),h.xp6(1),h.Q6J("ngIf",i.stageLevel.completed)("ngIfElse",s),h.xp6(4),h.Q6J("ngIf",i.stageLevel.selected)("ngIfElse",o)}},dependencies:[W.mk,W.sg,W.O5,Ca.oO],styles:[".stage-level-layout[_ngcontent-%COMP%]{padding-top:1px}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-font[_ngcontent-%COMP%], .stage-level-layout[_ngcontent-%COMP%]   .stage-level-number-selected[_ngcontent-%COMP%], .stage-level-layout[_ngcontent-%COMP%]   .stage-level-number-unselected[_ngcontent-%COMP%]{font-size:17px}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-number-unselected[_ngcontent-%COMP%]{font-weight:450}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-number-selected[_ngcontent-%COMP%]{font-weight:600}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-asterisk-unselected[_ngcontent-%COMP%]{color:#00f}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-asterisk-selected[_ngcontent-%COMP%]{color:#ec09eb}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-completed[_ngcontent-%COMP%], .stage-level-layout[_ngcontent-%COMP%]   .stage-level-completed-value[_ngcontent-%COMP%]{color:green;opacity:.5}.stage-level-layout[_ngcontent-%COMP%]   .stage-level-completed-value[_ngcontent-%COMP%]{font-weight:500;color:#000}"]}),e})();function jM(n,e){1&n&&(h.TgZ(0,"div")(1,"span",3),h._uU(2,"No stage levels defined!"),h.qZA()())}const WM=function(n){return{"border-bottom":n}};function KM(n,e){if(1&n&&(h.TgZ(0,"div",6),h._UZ(1,"app-stage-level",7),h.qZA()),2&n){const t=e.$implicit;h.Q6J("ngStyle",h.VKq(2,WM,t.selected?"none":"1px solid #d4d4d4")),h.xp6(1),h.Q6J("stageLevel",t)}}function HM(n,e){if(1&n&&(h.TgZ(0,"div",4),h.YNc(1,KM,2,4,"div",5),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.stageLevels)}}let QM=(()=>{var n;class e{constructor(){this.MAXSTAGE_LEVELS=5,this.NO_STAGE_LEVELS=!1}ngOnInit(){this.NO_STAGE_LEVELS=!this.stageLevels||this.stageLevels&&this.stageLevels.length!=this.MAXSTAGE_LEVELS}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-game-stage-levels"]],inputs:{stageLevels:"stageLevels"},decls:4,vars:2,consts:[[1,"game-stage-level-layout"],[4,"ngIf","ngIfElse"],["HAS_STAGE_LEVELS",""],[1,"warning-message"],[1,"stage-levels"],["class","stage-level",3,"ngStyle",4,"ngFor","ngForOf"],[1,"stage-level",3,"ngStyle"],[3,"stageLevel"]],template:function(r,i){if(1&r&&(h.TgZ(0,"div",0),h.YNc(1,jM,3,0,"div",1),h.YNc(2,HM,2,1,"ng-template",null,2,h.W1O),h.qZA()),2&r){const s=h.MAs(3);h.xp6(1),h.Q6J("ngIf",i.NO_STAGE_LEVELS)("ngIfElse",s)}},dependencies:[W.sg,W.O5,W.PC,Ca.Zl,qM],styles:[".digit-font-settings[_ngcontent-%COMP%], .game-stage-level-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{font-size:17px;font-weight:500;line-height:17px;font-family:Courier New,Courier,monospace;letter-spacing:.03em}.digits-border-horizontal[_ngcontent-%COMP%], .game-stage-level-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{border-bottom:1px solid #d4d4d4;padding:12px 0}.game-stage-level-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{font-weight:500;font-size:17px;text-align:center;color:orange;padding-left:calc(50% - 115px)}.game-stage-level-layout[_ngcontent-%COMP%]   .stage-levels[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-items:center}.game-stage-level-layout[_ngcontent-%COMP%]   .stage-levels[_ngcontent-%COMP%]   .stage-level[_ngcontent-%COMP%]{border:1px solid #d4d4d4;padding:0 10px;order:0;flex:1 1 auto;align-self:auto}"]}),e})();class Kw{constructor(e=1/0){this.capacity=e,this.itemStorage=[]}peekBy(e){return this.itemStorage[e]}clear(){this.itemStorage.splice(0,this.itemStorage.length)}push(e){if(this.size()===this.capacity)throw Error("Error: The Stack has reached maximum Capacity!");this.itemStorage.push(e)}pop(){return this.itemStorage.pop()}peek(){return this.itemStorage[this.size()-1]}size(){return this.itemStorage.length}}class Hw{constructor(e,t,r){this.operands=e,this.operator=t,this.result=r}}var qm=j(430),YM=j(6550);const Qw=function(n){return{"background-color":n}};function ZM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,s=h.oxw();return h.KtG(s.onOperandButtonClick(i))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw().$implicit;h.Q6J("disabled",t.disabled)("ngStyle",h.VKq(3,Qw,t.selected?"rgb(190 209 253 / 59%)":"white")),h.xp6(1),h.hij("",t.value," ")}}function JM(n,e){if(1&n&&(h.ynx(0),h.YNc(1,ZM,2,5,"button",7),h.BQk()),2&n){const t=e.index;h.xp6(1),h.Q6J("ngIf",t<3)}}function XM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,s=h.oxw();return h.KtG(s.onOperandButtonClick(i))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw().$implicit;h.Q6J("disabled",t.disabled)("ngStyle",h.VKq(3,Qw,t.selected?"rgb(190 209 253 / 59%)":"transparent")),h.xp6(1),h.hij("",t.value," ")}}function eL(n,e){if(1&n&&(h.ynx(0),h.YNc(1,XM,2,5,"button",7),h.BQk()),2&n){const t=e.index;h.xp6(1),h.Q6J("ngIf",t>2)}}function tL(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"button",9),h.NdJ("click",function(){const s=h.CHM(t).$implicit,o=h.oxw();return h.KtG(o.onOperatorButtonClick(s))}),h._UZ(2,"mat-icon",10),h.qZA(),h.BQk()}if(2&n){const t=e.$implicit,r=e.index;h.xp6(1),h.Q6J("ngClass",0===r?"revert-button":"arithmetic-operation-button"),h.xp6(1),h.s9C("svgIcon",t.icon)}}let nL=(()=>{var n;class e{constructor(r,i){this.operators=new Array({selected:!1,caption:H.OPERATOR_REV,operator:H.OPERATOR_REV,icon:"revert"},{selected:!1,caption:H.OPERATOR_ADD,operator:H.OPERATOR_ADD,icon:"addition"},{selected:!1,caption:H.OPERATOR_SUB,operator:H.OPERATOR_SUB,icon:"substraction"},{selected:!1,caption:H.OPERATOR_MUL,operator:H.OPERATOR_MUL,icon:"multiplication"},{selected:!1,caption:H.OPERATOR_DIV,operator:H.OPERATOR_DIV,icon:"division"}),this.onExpectedResultReached=new h.vpe,this.onInvalidOperationExecuted=new h.vpe,r.addSvgIcon("revert",i.bypassSecurityTrustResourceUrl("assets/icons/rotate-left-solid.svg")),r.addSvgIcon("addition",i.bypassSecurityTrustResourceUrl("assets/icons/plus-solid.svg")),r.addSvgIcon("substraction",i.bypassSecurityTrustResourceUrl("assets/icons/minus-solid.svg")),r.addSvgIcon("multiplication",i.bypassSecurityTrustResourceUrl("assets/icons/xmark-solid.svg")),r.addSvgIcon("division",i.bypassSecurityTrustResourceUrl("assets/icons/divide-solid.svg"))}getSelectedOperator(){return this.operators.find(r=>r.selected)}clearSelectionOfOperands(){this.gameParameters.operands.forEach(r=>{r.selected=!1})}isTheExpectedResultReached(r){return this.gameParameters.result===r}addStateToHistory(r){this.history.push(r)}clearSelectionOfOperators(){this.operators.forEach(r=>{r.selected=!1})}addGameOperationToOperationHistory(r){this.operationHistory?.push(r)}ngOnInit(){this.history=new Kw,this.operationHistory=new Kw}revertLastOperation(){this.history.size()>0?this.gameParameters=this.history.pop():console.log("History is empty!"),this.clearSelectionOfOperators(),this.clearSelectionOfOperands(),this.selectedOperandA=null,this.selectedOperandB=null}enableOfAllOperands(){this.gameParameters.operands.forEach(r=>{r.disabled=!1})}clearHistory(){this.history?.clear()}removeLastOperation(){return this.history.pop()}onOperandButtonClick(r){if(r.selected=!r.selected,!r.selected){if(this.selectedOperandB&&this.selectedOperandB.id===r.id)return this.selectedOperandB.selected=!1,void(this.selectedOperandB=null);if(this.selectedOperandA&&this.selectedOperandA.id===r.id)return this.selectedOperandA.selected=!1,void(this.selectedOperandA=null)}this.selectedOperandA?this.selectedOperandA.id!==r.id&&(this.selectedOperandB||(this.selectedOperandB=r)):this.selectedOperandA=r;var i=this.getSelectedOperator();if(this.selectedOperandA&&this.selectedOperandB&&!i)this.selectedOperandB.selected=!1,this.selectedOperandB=null;else if(this.selectedOperandA&&this.selectedOperandB&&i){let s=ln.cloneGameParameters(this.gameParameters),o=ln.evaluate(this.selectedOperandA.value,this.selectedOperandB.value,i.operator);if(this.addStateToHistory(s),o===Number.MIN_VALUE)this.onInvalidOperationExecuted.emit(o);else{let a=new Array(this.selectedOperandA.value,this.selectedOperandB.value),c=new Hw(a,i.operator,o);this.addGameOperationToOperationHistory(c),this.isTheExpectedResultReached(o)&&this.onExpectedResultReached.emit(this.operationHistory),r.value=o,this.gameParameters.operands.find(l=>l.id==this.selectedOperandA.id).disabled=!0,this.clearSelectionOfOperators(),this.clearSelectionOfOperands(),this.selectedOperandA=null,this.selectedOperandB=null}}console.log(`Value ${r.value} Selected ${r.selected}`)}onOperatorButtonClick(r){if(this.selectedOperandA||r.operator===H.OPERATOR_REV){if(r.selected=!r.selected,r.operator===H.OPERATOR_REV){this.revertLastOperation();let i=ln.cloneGameParameters(this.gameParameters),s=new Array;i.operands.forEach(a=>{s.push(a.value)});let o=new Hw(s,r.operator,this.gameParameters.result);this.addGameOperationToOperationHistory(o)}console.log(`Caption ${r.caption} Selected ${r.selected}`)}else r.selected=!1}ngOnDestroy(){this.history.clear(),this.history=void 0,this.operationHistory.clear(),this.operationHistory=void 0}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(qm.jv),h.Y36(YM.H7))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-game-arithmetic-operations"]],inputs:{gameParameters:"gameParameters"},outputs:{onExpectedResultReached:"onExpectedResultReached",onInvalidOperationExecuted:"onInvalidOperationExecuted"},decls:13,vars:4,consts:[[1,"game-arithmetic-operations-layout"],[1,"usage-instruction"],[1,"expected-result"],[1,"operands-container"],[1,"three-operands"],[4,"ngFor","ngForOf"],[1,"operators-container"],["type","button","class","operand",3,"disabled","ngStyle","click",4,"ngIf"],["type","button",1,"operand",3,"disabled","ngStyle","click"],["type","button",1,"operator-content",3,"ngClass","click"],[1,"operator-content-icon",3,"svgIcon"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1),h._uU(2,"Use the any combination of number to reach the target:"),h.qZA(),h.TgZ(3,"div")(4,"label",2),h._uU(5),h.qZA()(),h.TgZ(6,"div",3)(7,"div",4),h.YNc(8,JM,2,1,"ng-container",5),h.qZA(),h.TgZ(9,"div",4),h.YNc(10,eL,2,1,"ng-container",5),h.qZA()(),h.TgZ(11,"div",6),h.YNc(12,tL,3,2,"ng-container",5),h.qZA()()),2&r&&(h.xp6(5),h.Oqu(i.gameParameters.result),h.xp6(3),h.Q6J("ngForOf",i.gameParameters.operands),h.xp6(2),h.Q6J("ngForOf",i.gameParameters.operands),h.xp6(2),h.Q6J("ngForOf",i.operators))},dependencies:[W.mk,W.sg,W.O5,W.PC,Ca.oO,Ca.Zl,qm.Hw],styles:[".game-arithmetic-operations-layout[_ngcontent-%COMP%]{text-align:center}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .usage-instruction[_ngcontent-%COMP%]{font-size:13px;font-weight:500;line-height:13px;letter-spacing:.02em;padding-bottom:20px;font-family:Arial,Helvetica,sans-serif}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .expected-result[_ngcontent-%COMP%]{text-align:center;font-size:55px;font-weight:500;padding-bottom:1rem}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operands-container[_ngcontent-%COMP%]{font-size:44px;font-weight:500}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operands-container[_ngcontent-%COMP%]   .three-operands[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:7px}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operands-container[_ngcontent-%COMP%]   .three-operands[_ngcontent-%COMP%]   .operand[_ngcontent-%COMP%]{width:90px;height:90px;border:4px dashed blue;border-radius:50%;padding:32px 23px 30px 20px;font-size:26px;font-weight:550;margin:4px 10px;font-family:Courier New,Courier,monospace}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operands-container[_ngcontent-%COMP%]   .three-operands[_ngcontent-%COMP%]   .operand[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{border:4px solid blue}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operators-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-content:center;align-items:center}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operator-content[_ngcontent-%COMP%]{order:0;flex:0 1 auto;align-self:auto;width:3.55rem;height:3.55rem;border:4px solid #6b6b6b;border-radius:50%;margin:3px;display:flex;justify-content:center;align-items:center;color:#00f}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .operator-content-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-weight:500;vertical-align:middle}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .revert-button[_ngcontent-%COMP%]{background-color:#dbfbdd}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .revert-button[_ngcontent-%COMP%]:hover{background-color:#aae0ae}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .arithmetic-operation-button[_ngcontent-%COMP%]{background-color:#d9ecff}.game-arithmetic-operations-layout[_ngcontent-%COMP%]   .arithmetic-operation-button[_ngcontent-%COMP%]:hover{background-color:#aed7ff}"]}),e})();const rL=["arithmeticOperations"],iL=[{path:"digits/digits-game",component:(()=>{var n;class e{constructor(r,i,s){this.messageService=r,this.cookieService=i,this.clipboardService=s,this.COOKIE_LK_DIGITS="CookieLKNumbers",this.currentDate=new Date,this.stageLevels=[],this.gameParameters=[],this.stageIndex=0,this.firestore=(0,h.f3M)(xa)}initializeStageLevels(){this.stageLevels=new Array({selected:!0,index:0,value:96,completed:!1,summary:""},{selected:!1,index:1,value:161,completed:!1,summary:""},{selected:!1,index:2,value:275,completed:!1,summary:""},{selected:!1,index:3,value:355,completed:!1,summary:""},{selected:!1,index:4,value:404,completed:!1,summary:""})}stageToCompleted(){this.stageLevels[this.stageIndex].completed=!0,this.stageLevels[this.stageIndex].selected=!1}formatOperations(r){let i="Completed! Executed Operations:\n",s=r.size()-1;for(;s>=0;){const o=r.peekBy(s);i+=s+1+". "+o?.operands[0]+" "+o?.operator+" "+o?.operands[1]+" = "+o?.result+"\n",--s}return i}createSummaryOfTHeOperations(r,i){let s=this.stageLevels[r].value+" -> ";for(;i.size()>0;){const o=i.pop();s+=""+o?.operator}return s+="\n",s}showSuccessMessage(r){this.messageService.add({severity:"success",summary:"Congratulation!",detail:r})}showErrorMessage(r){this.messageService.add({severity:"error",summary:"Error!",detail:r})}setupStages(){let r=0;this.gameParameters.forEach(i=>{this.stageLevels[r].value=i.result,++r})}storeGameStateToCookie(){let r=new Hm;r.storeDate=new Date,r.stageIndex=this.stageIndex,r.stageLevels=this.stageLevels,r.gameParameters=this.gameParameters;let i=r.cookieData2Text(),s=new Date;s.setHours(23,59,59,999),this.cookieService.set(this.COOKIE_LK_DIGITS,i,s)}restoreGameStateFromCookie(){let i,r=this.cookieService.get(this.COOKIE_LK_DIGITS);return r&&""!=r?(i=new Hm,i=i.text2CookieData(r)):(console.log("Unable to retrieve the Game State"),i=null),i}mapPuzzleDataToGameParameters(r){r.stages.forEach(i=>{let s=this.gameParameters.find(o=>o.stageIndex===i.stageIndex);if(s){s.result=i.expectedValue;let o=0;s.operands.forEach(c=>{c.value=i.operands[o],o++}),this.initializeStageLevels(),this.stageLevels.find(c=>c.index===i.stageIndex)}})}mapGameParametersToPuzzleData(r){let i=new Zw;return i.day=new Date,i.day.setHours(23,59,59,999),r.forEach(s=>{let o=new Jw;o.stageIndex=s.stageIndex,o.expectedValue=s.result;let a=new Array;s.operands.forEach(c=>{a.push(c.value)}),o.operands=a,i.stages.push(o)}),i}isDateSame(r,i){return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate()}ngOnInit(){this.initializeStageLevels(),alert("This \"Numbers\" game is a prototype only!\n        -known bug, Error with Permissions-Policy header: Origin trial controlled feature not enabled: 'interest-cohort'");let r=this.restoreGameStateFromCookie();if(r){const i=new Date(r.storeDate);if(this.isDateSame(i,new Date))this.stageIndex=r.stageIndex,this.stageLevels=r.stageLevels,this.gameParameters=r.gameParameters,this.setupStages(),console.log("Game state restored from cookie");else{this.generateGameParameters=new Wr,this.gameParameters=this.generateGameParameters.generateStageNumbers(),this.storeGameStateToCookie(),this.setupStages();let s=this.mapGameParametersToPuzzleData(this.gameParameters);console.log("Date mismatch which restored from cookie "+s)}}else{console.log("No game state in cookie"),this.generateGameParameters=new Wr,this.gameParameters=this.generateGameParameters.generateStageNumbers();const i=uM(this.firestore,"puzzledata");this.puzzleRawData$=cM(i),this.puzzleRawData$.subscribe(s=>{if(s&&s.length>0)if(this.todayPuzzleData=JSON.parse(s[0].data),this.todayPuzzleData)if(console.log("Puzzle Data retrieved from DB"),this.todayPuzzleData.day=new Date(this.todayPuzzleData.day),this.todayPuzzleData.day&&this.isDateSame(this.todayPuzzleData.day,new Date))console.log("Puzzle Data day date is matched, restore puzzle data to Game Parameters"),this.mapPuzzleDataToGameParameters(this.todayPuzzleData),this.storeGameStateToCookie(),this.setupStages();else{console.log("Puzzle Data day date is Not matched, generate new game parameters"),this.generateGameParameters=new Wr,this.gameParameters=this.generateGameParameters.generateStageNumbers(),this.storeGameStateToCookie(),this.setupStages();let c=this.mapGameParametersToPuzzleData(this.gameParameters);console.log(JSON.stringify(c))}else{console.log("No Puzzle Data retrieved from DB, generate new game parameters"),this.generateGameParameters=new Wr,this.gameParameters=this.generateGameParameters.generateStageNumbers(),this.storeGameStateToCookie(),this.setupStages();let a=this.mapGameParametersToPuzzleData(this.gameParameters);console.log(JSON.stringify(a))}else{console.log("No Puzzle Data retrieved from DB, generate new game parameters"),this.generateGameParameters=new Wr,this.gameParameters=this.generateGameParameters.generateStageNumbers(),this.storeGameStateToCookie(),this.setupStages();let o=this.mapGameParametersToPuzzleData(this.gameParameters);console.log(JSON.stringify(o))}})}}onExpectedResultReached(r){const i=this.formatOperations(r),s=this.createSummaryOfTHeOperations(this.stageIndex,r);this.stageLevels[this.stageIndex].summary=s,this.showSuccessMessage("You are reach the expected result!"),alert(i),this.clipboardService.copy(i),this.stageToCompleted();let o=this.stageIndex===this.stageLevels.length-1;if(o){let a="Genius!\n";this.stageLevels.forEach(c=>{a+=c.summary}),this.clipboardService.copy(a),alert(a)}o||(this.stageIndex++,this.stageLevels[this.stageIndex].selected=!0),this.storeGameStateToCookie(),this.arithmeticComponent.clearHistory()}onInvalidOperationExecuted(r){this.showErrorMessage("Invalid Operation Executed!"),this.arithmeticComponent.revertLastOperation(),console.log(r)}onDeleteCookie(){this.cookieService.deleteAll()}onUpdatePuzzleData(){console.log("Will update puzzle data")}}return(n=e).\u0275fac=function(r){return new(r||n)(h.Y36(Qn.ez),h.Y36(Qm),h.Y36(fM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-digits-game"]],viewQuery:function(r,i){if(1&r&&h.Gf(rL,7),2&r){let s;h.iGM(s=h.CRH())&&(i.arithmeticComponent=s.first)}},features:[h._Bn([Qn.ez,Qm])],decls:18,vars:6,consts:[[1,"digits-game-layout"],["position","top-center","closable","true"],[1,"digits-game-title"],["href","https://www.nytimes.com/games/digits",1,"anchor-underline-off"],[1,"title-bar"],[1,"title-bar-name",3,"click"],[1,"title-bar-date",3,"click"],[1,"tool-bar"],[3,"stageLevels"],[3,"gameParameters","onExpectedResultReached","onInvalidOperationExecuted"],["arithmeticOperations",""]],template:function(r,i){1&r&&(h.TgZ(0,"div",0),h._UZ(1,"p-toast",1),h.TgZ(2,"div",2),h._uU(3," This is a daily numbers puzzle, similar to the "),h.TgZ(4,"a",3),h._uU(5,"NY Times Digits"),h.qZA(),h._uU(6,", which unfortunatelly discontinued at August 8, 2023 "),h.qZA(),h.TgZ(7,"div",4)(8,"div",5),h.NdJ("click",function(){return i.onDeleteCookie()}),h._uU(9," Numbers "),h.qZA(),h.TgZ(10,"div",6),h.NdJ("click",function(){return i.onUpdatePuzzleData()}),h._uU(11),h.ALo(12,"date"),h.qZA()(),h.TgZ(13,"div",7),h._UZ(14,"app-game-stage-levels",8),h.qZA(),h.TgZ(15,"div")(16,"app-game-arithmetic-operations",9,10),h.NdJ("onExpectedResultReached",function(o){return i.onExpectedResultReached(o)})("onInvalidOperationExecuted",function(o){return i.onInvalidOperationExecuted(o)}),h.qZA()()()),2&r&&(h.xp6(11),h.hij(" ",h.xi3(12,3,i.currentDate,"MM/dd/yyyy")," "),h.xp6(3),h.Q6J("stageLevels",i.stageLevels),h.xp6(2),h.Q6J("gameParameters",i.gameParameters[i.stageIndex]))},dependencies:[PM,QM,nL,W.uU],styles:[".digit-font-settings[_ngcontent-%COMP%], .digits-game-layout[_ngcontent-%COMP%]   .tool-bar[_ngcontent-%COMP%], .digits-game-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{font-size:17px;font-weight:500;line-height:17px;font-family:Courier New,Courier,monospace;letter-spacing:.03em}.digits-border-horizontal[_ngcontent-%COMP%], .digits-game-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%], .digits-game-layout[_ngcontent-%COMP%]   .digits-game-title[_ngcontent-%COMP%]{border-bottom:1px solid #d4d4d4;padding:12px 0}.digits-game-layout[_ngcontent-%COMP%]{height:98vh;width:100vw}.digits-game-layout[_ngcontent-%COMP%]   .digits-game-title[_ngcontent-%COMP%]{text-align:center}.digits-game-layout[_ngcontent-%COMP%]   .anchor-underline-off[_ngcontent-%COMP%]{text-decoration:none}.digits-game-layout[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{font-weight:500;font-size:17px;text-align:center;color:orange}.digits-game-layout[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]{padding:6px 0;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;align-content:stretch;align-items:center;font-size:28px;font-weight:300;font-family:Arial,Helvetica,sans-serif}.digits-game-layout[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .title-bar-name[_ngcontent-%COMP%], .digits-game-layout[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .title-bar-date[_ngcontent-%COMP%]{order:0;flex:0 1 auto;align-self:auto}.digits-game-layout[_ngcontent-%COMP%]   .tool-bar[_ngcontent-%COMP%]{height:52px}@media only screen and (max-width: 600px){.digits-game-layout[_ngcontent-%COMP%]{height:101vh;width:101vw}}"]}),e})()}];let sL=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[W.ez,ka.Bz.forChild(iL),ka.Bz]}),e})();var oL=j(9814);let EL=(()=>{var n;class e{}return n=e,(0,D.Z)(e,"\u0275fac",function(r){return new(r||n)}),(0,D.Z)(e,"\u0275mod",h.oAB({type:n})),(0,D.Z)(e,"\u0275inj",h.cJS({imports:[W.ez,Um.T,Vm,Gm,Bm,zm,$m.q]})),e})();var SL=j(2340);let xL=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[W.ez,ka.Bz,RM,EL,sL,oL.o9,qm.Ps,pM,UA(()=>GA(SL.N.firebasePuzzleData)),aM(()=>lM(VA()))]}),e})()}}]);